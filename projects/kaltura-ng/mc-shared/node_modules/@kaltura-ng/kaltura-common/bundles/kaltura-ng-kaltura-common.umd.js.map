{"version":3,"file":"kaltura-ng-kaltura-common.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@kaltura-ng/kaltura-common/lib/operation-tag/operation-tag-store-mediator.ts","ng://@kaltura-ng/kaltura-common/lib/operation-tag/operation-tag-manager.service.ts","ng://@kaltura-ng/kaltura-common/lib/operation-tag/operation-tag.module.ts","ng://@kaltura-ng/kaltura-common/lib/friendly-hash-id.ts","ng://@kaltura-ng/kaltura-common/lib/kaltura-logger.ts","ng://@kaltura-ng/kaltura-common/lib/server-polls/server-polls.service.ts","ng://@kaltura-ng/kaltura-common/lib/upload-management/tracked-file.ts","ng://@kaltura-ng/kaltura-common/lib/rxjs/operators/cancel-on-destroy.ts","ng://@kaltura-ng/kaltura-common/lib/rxjs/operators/tag.ts","ng://@kaltura-ng/kaltura-common/lib/upload-management/upload-management.service.ts","ng://@kaltura-ng/kaltura-common/lib/upload-management/upload-management.module.ts","ng://@kaltura-ng/kaltura-common/lib/upload-management/upload-file-adapter.ts","ng://@kaltura-ng/kaltura-common/lib/utils/download.ts","ng://@kaltura-ng/kaltura-common/lib/utils/kaltura-utils.ts","ng://@kaltura-ng/kaltura-common/lib/xml-parser/xml-to-json.ts","ng://@kaltura-ng/kaltura-common/lib/xml-parser/xml-parser.ts","ng://@kaltura-ng/kaltura-common/lib/app-storage.service.ts","ng://@kaltura-ng/kaltura-common/lib/kaltura-common.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export interface OperationTagManagerProxy {\n    increase: (tag: string) => void;\n    decrease: (tag: string) => void;\n}\n\nexport class OperationTagStoreMediator{\n\n    private static _operationsTagManager: OperationTagManagerProxy = null;\n\n    public static register(operationsTagManager: OperationTagManagerProxy){\n        this._operationsTagManager = operationsTagManager;\n    }\n\n    public static increase(tag: string){\n        if (this._operationsTagManager){\n            this._operationsTagManager.increase(tag);\n        }\n    }\n\n    public static decrease(tag: string){\n        if (this._operationsTagManager){\n            this._operationsTagManager.decrease(tag);\n        }\n    }\n\n}","import {Injectable, OnDestroy} from '@angular/core';\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\nimport {Observable} from 'rxjs/Observable';\nimport {OperationTagManagerProxy} from './operation-tag-store-mediator';\n\n@Injectable()\nexport class OperationTagManagerService implements OperationTagManagerProxy {\n\n    private _tagStatus = new BehaviorSubject<{ [key: string]: number }>({});\n\n    // whenever a tag status changes this event is emitted\n    public tagStatus$ = this._tagStatus.asObservable();\n\n    constructor() {\n    }\n\n    // increase the count for a tag\n    increase(tag: string): void {\n        const tagsData = this._tagStatus.getValue();\n        if (!tagsData[tag]) {\n            tagsData[tag] = 0;\n        }\n        tagsData[tag]++;\n        this._tagStatus.next(tagsData);\n\n    }\n\n    decrease(tag: string): void {\n        const tagsData = this._tagStatus.getValue();\n        if (tagsData[tag] > 0) {\n            tagsData[tag]--;\n            this._tagStatus.next(tagsData);\n        } else {\n            tagsData[tag] = 0;\n            this._tagStatus.next(tagsData);\n\n        }\n    }\n}\n","\nimport { Self, Optional, NgModule, ModuleWithProviders } from '@angular/core';\nimport {OperationTagStoreMediator} from \"./operation-tag-store-mediator\";\nimport {OperationTagManagerService} from \"./operation-tag-manager.service\";\n\n@NgModule({\n    imports: [\n    ],\n    declarations: [\n    ],\n    exports: [\n    ],\n    providers: [\n    ]\n})\nexport class OperationTagModule {\n\n    // Prevents angular from creating another instance for operationTagManagerService when defined as provider in more than one place\n    // (Each component will get the same instance as in the module/component that called the operationTagManagerService.forRoot)\n    constructor(@Self() @Optional() operationTagManagerService: OperationTagManagerService){\n        if (operationTagManagerService) {\n            OperationTagStoreMediator.register(operationTagManagerService);\n        }\n    }\n\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: OperationTagModule,\n            providers: <any[]>[\n                OperationTagManagerService\n            ]\n        };\n    }\n}\n","'use strict';\n/**\n * Source - from http://fiznool.com/blog/2014/11/16/short-id-generation-in-javascript/\n */\n\n/**\n * The default alphabet is 25 numbers and lowercase letters.\n * Any numbers that look like letters and vice versa are removed:\n * 1 l, 0 o.\n * Also the following letters are not present, to prevent any\n * expletives: cfhistu\n */\nvar DEFAULT_ALPHABET =\n    '23456789abdegjkmnpqrvwxyz';\n\n// Governs the length of the ID.\n// With an alphabet of 25 chars,\n// a length of 8 gives us 25^8 or\n// 152,587,890,625 possibilities.\n// Should be enough...\nvar DEFAULT_ID_LENGTH = 5;\n\n/**\n * Governs the number of times we should try to find\n * a unique value before giving up.\n */\nvar UNIQUE_RETRIES = 9999;\n\n\n\nexport class FriendlyHashId {\n\n    static defaultInstance : FriendlyHashId = null;\n    static generate(alphabetOptions? : any) : string {\n        if (!FriendlyHashId.defaultInstance)\n        {\n            FriendlyHashId.defaultInstance = new FriendlyHashId();\n        }\n        return FriendlyHashId.defaultInstance.generate(alphabetOptions);\n    }\n\n    /**\n     * Returns a randomly-generated friendly ID.\n     * Note that the friendly ID is not guaranteed to be\n     * unique to any other ID generated by this same method,\n     * so it is up to you to check for uniqueness.\n     * return {String} friendly ID.\n     */\n    generate(alphabetOptions? : any) : string\n    {\n        var options = alphabetOptions || {};\n\n        var alphabet = options.alphabet || DEFAULT_ALPHABET;\n        var idLength = options.idLength || DEFAULT_ID_LENGTH;\n\n        var rtn = '';\n        for (var i = 0; i < idLength; i++) {\n            rtn += alphabet.charAt(Math.floor(Math.random() * alphabet.length));\n        }\n        return rtn;\n    };\n\n    /**\n     * Tries to generate a unique ID that is not defined in the\n     * `previous` array.\n     * param  {Array} previous The list of previous ids to avoid.\n     * return {String} A unique ID, or `null` if one could not be generated.\n     */\n    generateUnique(previous : any[]) {\n        previous = previous || [];\n        var retries = 0;\n        var id;\n\n        // Try to generate a unique ID,\n        // i.e. one that isn't in the previous.\n        while (!id && retries < UNIQUE_RETRIES) {\n            id = this.generate();\n            if (previous.indexOf(id) !== -1) {\n                id = null;\n                retries++;\n            }\n        }\n\n        return id;\n    };\n\n}\n","import { InjectionToken } from '@angular/core';\n\nexport type Context = { [key: string]: any };\nexport type DefferedContext = () => Context;\n\nexport const KalturaLoggerInjectionToken = new InjectionToken<KalturaLogger>('kaltura-logger');\n\nexport interface KalturaLogger {\n\ttrace(message: string, context?: Context): void;\n\n\ttrace(message: string, context?: DefferedContext): void;\n\n\ttrace(message: string, context?: Context | DefferedContext): void;\n\n\tdebug(message: string, context?: Context): void;\n\n\tdebug(message: string, context?: DefferedContext): void;\n\n\tdebug(message: string, context?: Context | DefferedContext): void;\n\n\tinfo(message: string, context?: Context): void;\n\n\tinfo(message: string, context?: DefferedContext): void;\n\n\tinfo(message: string, context?: Context | DefferedContext): void;\n\n\twarn(message: string, context?: Context): void;\n\n\twarn(message: string, context?: DefferedContext): void;\n\n\twarn(message: string, context?: Context | DefferedContext): void;\n\n\terror(message: string, context?: Context): void;\n\n\terror(message: string, error?: Error): void;\n\n\terror(message: string, context?: Error | Context): void;\n\n\tfatal(message: string, context?: Context): void;\n\n\tfatal(message: string, error?: Error): void;\n\n\tfatal(message: string, context?: Error | Context): void;\n\n\tsubLogger(name: string): KalturaLogger;\n}\n\nexport class EmptyLogger implements KalturaLogger {\n\ttrace(message: string, context?: Context): void;\n\ttrace(message: string, context?: DefferedContext): void;\n\ttrace(message: string, context?: Context | DefferedContext): void;\n\ttrace(message: string, context?): void {\n\t}\n\n\tdebug(message: string, context?: Context): void;\n\tdebug(message: string, context?: DefferedContext): void;\n\tdebug(message: string, context?: Context | DefferedContext): void;\n\tdebug(message: string, context?): void {\n\t}\n\n\tinfo(message: string, context?: Context): void;\n\tinfo(message: string, context?: DefferedContext): void;\n\tinfo(message: string, context?: Context | DefferedContext): void;\n\tinfo(message: string, context?): void {\n\t}\n\n\twarn(message: string, context?: Context): void;\n\twarn(message: string, context?: DefferedContext): void;\n\twarn(message: string, context?: Context | DefferedContext): void;\n\twarn(message: string, context?): void {\n\t}\n\n\terror(message: string, context?: Context): void;\n\terror(message: string, error?: Error): void;\n\terror(message: string, context?: Error | Context): void;\n\terror(message: string, context?): void {\n\t}\n\n\tfatal(message: string, context?: Context): void;\n\tfatal(message: string, error?: Error): void;\n\tfatal(message: string, context?: Error | Context): void;\n\tfatal(message: string, context?): void {\n\t}\n\n\tsubLogger(name: string): KalturaLogger {\n\t\treturn new EmptyLogger();\n\t}\n}\n\n","import { Observable } from 'rxjs';\nimport { Subscriber } from 'rxjs/Subscriber';\nimport { FriendlyHashId } from '../friendly-hash-id';\nimport { ISubscription } from 'rxjs/Subscription';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { EmptyLogger, KalturaLogger } from '../kaltura-logger';\nimport { Optional } from '@angular/core';\n\nexport type PollInterval = 10 | 30 | 60 | 300;\n\nexport interface RequestFactory<TRequest, TResponse> {\n  create(): TRequest;\n}\n\ninterface PollItem<TError> {\n  id: string;\n  interval: PollInterval;\n  lastExecution: Date,\n  queryEnabled: boolean,\n  requestFactory: RequestFactory<any, any>,\n  observer: Subscriber<{result: any, error: TError}>\n}\n\nexport abstract class ServerPolls<TRequest, TError> {\n  private _pollQueue: { [key: string]: PollItem<TError> } = {};\n  private _tokenGenerator = new FriendlyHashId();\n  private _queueTimeout: number;\n  private _missingDestoryHandling = false;\n  private _subscriptions: ISubscription[] = [];\n  private _state = new BehaviorSubject({ busy: false });\n    private _logger: KalturaLogger;\n  public state$ = this._state.asObservable();\n  private _queueInterval: number = null;\n\n  protected abstract _executeRequests(requests: TRequest[]): Observable<{ error: TError, result: any }[]>;\n\n  protected abstract _createGlobalError(error?: Error): TError;\n\n  protected abstract _getOnDestroy$(): Observable<void>;\n\n  protected abstract _canExecute(): boolean;\n\n  constructor(kalturaLogger: KalturaLogger) {\n\n\t  if (kalturaLogger) {\n\t\t  this._logger = kalturaLogger;\n\t  } else {\n\t\t  this._logger = new EmptyLogger();\n\t  }\n\t  this._initialize();\n  }\n\n  private _warnAboutMissingDestory(): void {\n      // NOTICE: showing a warning every time since this is an implementation issue that must be addressed during development.\n      const error = `calling method '_getOnDestroy$()' didn't return valid observable (did you remember to provide 'Observable' that will be invoked from ngOnDestroy method?)`;\n      this._logger.error(error);\n  }\n\n  private _initialize(): void {\n      this._logger.trace('_initialize()');\n      setTimeout(() => {\n          const onDestroy$ = this._getOnDestroy$();\n\n          if (!onDestroy$) {\n              this._missingDestoryHandling = true;\n              this._warnAboutMissingDestory();\n          } else {\n              onDestroy$.subscribe(() => {\n                  this._logger.trace('onDestroy$.subscribe()');\n                  this._cancelQueueInterval();\n                  this._subscriptions.forEach(item => {\n                      item.unsubscribe();\n                  });\n                  this._subscriptions = [];\n              });\n          }\n      });\n  }\n\n  private _cancelQueueInterval(): void {\n    clearTimeout(this._queueTimeout);\n  }\n\n  private _getPollQueueList(): PollItem<TError>[] {\n    return Object.keys(this._pollQueue).map(key => this._pollQueue[key]);\n  }\n\n  private _setupQueueTimer(): void {\n      this._cancelQueueInterval();\n\n      const pollQueueList = this._getPollQueueList();\n\n      if (this._missingDestoryHandling) {\n          // NOTICE: showing a warning every time since this is an implementation issue that must be addressed during development.\n          this._warnAboutMissingDestory();\n      }\n\n\n      if (!pollQueueList.length) {\n          this._logger.info('no actions found in the queue. suspending interval until an action will be added');\n          return;\n      }\n\n      let newInterval: number = null;\n      const hasNewPolls = pollQueueList.some(({lastExecution}) => !!lastExecution);\n      if (!hasNewPolls) {\n          newInterval = Math.min(...pollQueueList.map(({interval}) => interval)) / 2;\n      }\n      newInterval = newInterval && newInterval > 10 ? newInterval : 10; // default to ten seconds (minimum value)\n      if (this._queueInterval !== newInterval) {\n          this._logger.info( `updating queue interval to poll server every ${newInterval} seconds`);\n          this._queueInterval = newInterval;\n      }\n\n      this._queueTimeout = setTimeout(() => {\n          this._onQueueTimerTick();\n      }, this._queueInterval * 1000);\n  }\n\n  public forcePolling() {\n      this._logger.info('force server polling requested');\n      // cancel active requests\n      this._cancelQueueInterval();\n      this._subscriptions.forEach(subscription => {\n          subscription.unsubscribe();\n      });\n      this._subscriptions = [];\n\n      // enable all requests\n      this._getPollQueueList().forEach(item => item.queryEnabled = true);\n\n      // send poll request for all requests\n      const subscription = this._queryPollItems(this._getPollQueueList())\n          .subscribe(() => this._setupQueueTimer(), () => this._setupQueueTimer());\n  }\n\n    private _queryPollItems(items: PollItem<TError>[]): Observable<void> {\n        return Observable.create(observer => {\n            this._logger.debug(`execute server polling`);\n\n            if (!this._canExecute() || !items || items.length === 0) {\n                this._logger.debug(`execute server polling ignored, cannot execute request or no items provided to query`);\n                observer.next(undefined);\n                return;\n            }\n\n            const requests = items.map(item => {\n                let ItemRequest: TRequest;\n                let error: TError;\n                try {\n                    ItemRequest = item.requestFactory.create();\n                } catch (err) {\n                    this._logger.error(`failed to create a request for '${item.id}'. got the following error : '${err.message}'`);\n\n                    ItemRequest = null;\n                    error = this._createGlobalError(err);\n                }\n\n                if (error) {\n                    this._propagateServerResponse(item, {error: error, result: null});\n                }\n                return ItemRequest ? {pollItem: item, request: ItemRequest} : null;\n            }).filter(Boolean);\n\n            this._logger.info(`executing server poll for ${requests.length} items`);\n\n            if (!requests.length)\n            {\n                observer.next(undefined);\n            }else {\n                const subscription = this._executeRequests(requests.map(item => item.request))\n                    .subscribe(\n                        response => {\n                            this._removeSubscription(subscription);\n\n                            this._logger.info(`got ${response.length} responses. propagate responses to relevant actions`);\n                            requests.forEach(({pollItem}, index) => {\n                                let result = response[index];\n                                if (Array.isArray(result)) {\n                                    result = { result, error: null }\n                                }\n                                this._propagateServerResponse(pollItem, result);\n                            });\n\n                            observer.next(undefined);\n                        },\n                        (error) => {\n\n                            this._logger.error(`failed to query the server. got the following error : '${error.message}'`);\n                            this._removeSubscription(subscription);\n\n                            const errorResponse = {error: this._createGlobalError(error), result: null};\n                            requests.forEach(({pollItem}) => {\n                                this._propagateServerResponse(pollItem, errorResponse);\n                            });\n\n                            observer.next(undefined);\n                        }\n                    );\n                this._subscriptions.push(subscription);\n\n                return () => {\n                    this._removeSubscription(subscription);\n                };\n            }\n\n\n        });\n    }\n\n    private _removeSubscription(subscription: ISubscription): void {\n        if (subscription) {\n            const subscriptionIndex = this._subscriptions.indexOf(subscription);\n\n            if (subscriptionIndex > -1) {\n                this._subscriptions.splice(\n                    subscriptionIndex,\n                    1\n                )\n            }\n        }\n    }\n\n    private _onQueueTimerTick(): void {\n\n        if (!this._canExecute()) {\n            this._setupQueueTimer();\n            this._logger.trace('_onQueueTimerTick(): canExecute() check failed. ignore current execution');\n            return;\n        }\n\n        this._logger.debug('prepare server poll request');\n\n        const now = Number(new Date());\n        const itemsToBeExecuted = this._getPollQueueList()\n            .filter(item => item.queryEnabled && (!item.lastExecution || (Number(item.lastExecution) + (item.interval * 1000) <= now)));\n\n\n        if (!itemsToBeExecuted.length) {\n            this._logger.debug('nothing to run. Waiting next tick...');\n            this._setupQueueTimer();\n            return;\n        }\n\n        this._logger.info(`set busy mode to true`);\n        this._state.next({busy: true});\n        this._queryPollItems(itemsToBeExecuted)\n            .subscribe(\n                () => {\n                    this._state.next({busy: false});\n                    this._setupQueueTimer();\n                },\n                (error) => {\n                    this._state.next({busy: false});\n                }\n            );\n    }\n\n  private _propagateServerResponse(item: PollItem<TError>, response: { error: TError, result: any }): void{\n      try {\n          if (this._pollQueue[item.id]) {\n              this._logger.debug(`propagating response for ${item.id}`);\n              item.lastExecution = new Date();\n              item.observer.next(response);\n          }else\n          {\n              this._logger.info(`cannot find registered action for '${item.id} (it might indicate that this action was unsubscribed while a request to the server was executed)`);\n          }\n      } catch (err) {\n          this._logger.warn( `error happened while propagating response of '${item.id}'.ignoring error. got the following error: ${err.message}`);\n      }\n  }\n\n  public isBusy(): boolean {\n      return this._state.getValue().busy;\n  }\n\n  public register<TResponse>(intervalInSeconds: PollInterval, requestFactory: RequestFactory<TRequest, TResponse>): Observable<{ error: TError, result: TResponse }> {\n    return Observable.create(observer => {\n      const newPollId = this._tokenGenerator.generateUnique(Object.keys(this._pollQueue));\n        this._logger.info( `register new poll request ${newPollId} (interval = ${intervalInSeconds} seconds)`);\n      const newPollItem: PollItem<TError> = this._pollQueue[newPollId] = {\n        id: newPollId,\n        interval: intervalInSeconds,\n        lastExecution: null,\n          queryEnabled: false,\n        requestFactory: requestFactory,\n        observer: observer\n      };\n\n      this._logger.info( `execute the added request '${newPollId}'`);\n      let initialRequest = this._queryPollItems([newPollItem])\n          .subscribe(\n              () =>\n              {\n                  initialRequest = null;\n                  newPollItem.queryEnabled = true;\n                  this._setupQueueTimer();\n              },\n              () =>\n              {\n                  initialRequest = null;\n                  newPollItem.queryEnabled = true;\n                  this._setupQueueTimer();\n              }\n          );\n\n      return () => {\n          this._logger.info(`stop polling for ${newPollId}`);\n          if (initialRequest) {\n              initialRequest.unsubscribe();\n          }\n          delete this._pollQueue[newPollId];\n      }\n    });\n  }\n}\n","import { UploadFileData } from './upload-file-data';\nimport { ISubscription } from 'rxjs/Subscription';\n\nexport type TrackedFileStatus = string\n\nexport class TrackedFileStatuses {\n    public static readonly added: TrackedFileStatus = 'added'; // one-time status, cannot be assigned twice\n    public static readonly pendingPrepare: TrackedFileStatus = 'pendingPrepare';\n    public static readonly preparing: TrackedFileStatus = 'preparing';\n    public static readonly prepared: TrackedFileStatus = 'prepared'; // one-time status, cannot be assigned twice\n    public static readonly pendingUpload: TrackedFileStatus = 'waitingUpload';\n    public static readonly uploading: TrackedFileStatus = 'uploading';\n    public static readonly uploadCompleted: TrackedFileStatus = 'uploadCompleted'; // one-time status, cannot be assigned twice\n    public static readonly failure: TrackedFileStatus = 'failure';\n    public static readonly cancelled: TrackedFileStatus = 'cancelled';\n    public static readonly purged: TrackedFileStatus = 'purged';  // one-time status, cannot be assigned twice\n}\n\nexport interface TrackedFileData\n{\n    id: string;\n    status: TrackedFileStatus;\n    uploadStartAt: Date;\n    progress: number;\n    uploadCompleteAt?: Date;\n    uploadOrder: number;\n    failureType?: string;\n    failureReason?: string;\n    data: UploadFileData;\n}\n\nexport interface TrackedFileChanges\n{\n    status?: TrackedFileStatus;\n    uploadStartAt?: Date;\n    progress?: number;\n    uploadCompleteAt?: Date;\n    uploadOrder?: number;\n    failureType?: string;\n    failureReason?: string;\n}\n\nexport class TrackedFile {\n    private _id: string;\n    public get id():string{\n        return this._id;\n    }\n    status: TrackedFileStatus = TrackedFileStatuses.added;\n    uploadStartAt?: Date;\n    progress: number =  0;\n    uploadCompleteAt: Date = null;\n    uploadOrder: number = 0;\n    failureType: string;\n    failureReason: string;\n    data: UploadFileData;\n    uploadSubscription: ISubscription;\n    private _statusHistory : { [key:string] : boolean } = {\n        'added' : true\n    };\n\n    constructor(id: string, data: UploadFileData)\n    {\n        this._id = id;\n        this.data = data;\n    }\n\n    public asData() : TrackedFileData{\n        return {\n            id: this.id,\n            status: this.status,\n            uploadStartAt: this.uploadStartAt,\n            progress: this.progress,\n            uploadCompleteAt: this.uploadCompleteAt,\n            uploadOrder: this.uploadOrder,\n            failureType: this.failureType,\n            failureReason: this.failureReason,\n            data: this.data\n        };\n    }\n\n    public update(changes: TrackedFileChanges): void\n    {\n        if (changes.status && changes.status !== this.status) {\n            if (!this.canTransitionTo(changes.status))\n            {\n                throw new Error(`file ${this.id}: cannot update status to '${changes.status}'`);\n            }\n\n            this._statusHistory[changes.status] = true;\n        }\n\n        Object.assign(this,changes);\n    }\n\n    public wasInStatus(status: TrackedFileStatus): boolean\n    {\n        return !!this._statusHistory[status];\n    }\n\n    public canTransitionTo(toStatus: string) : boolean {\n        let result: boolean = false;\n        const trackedFile = this;\n        const fromStatus = trackedFile ? trackedFile.status : null;\n\n        if (trackedFile  && fromStatus && toStatus) {\n\n            if (fromStatus === TrackedFileStatuses.purged)\n            {\n                // never allow changing status once file was purged\n                result = false;\n            }\n\n            switch (toStatus) {\n                case TrackedFileStatuses.added:\n                    // one-time status, cannot be assigned twice\n                    result = !this.wasInStatus(TrackedFileStatuses.added);\n                    break;\n                case TrackedFileStatuses.pendingPrepare:\n                    result = !this.wasInStatus(TrackedFileStatuses.prepared);\n                    break;\n                case TrackedFileStatuses.preparing:\n                    result = !this.wasInStatus(TrackedFileStatuses.prepared)\n                        && fromStatus === TrackedFileStatuses.pendingPrepare;\n                    break;\n                case TrackedFileStatuses.prepared:\n                    // one-time status, cannot be assigned twice\n                    result = !this.wasInStatus(TrackedFileStatuses.prepared)\n                        && fromStatus === TrackedFileStatuses.preparing;\n                    break;\n                case TrackedFileStatuses.pendingUpload:\n                    result = this.wasInStatus(TrackedFileStatuses.prepared)\n                        && !this.wasInStatus(TrackedFileStatuses.uploadCompleted);\n                    break;\n                case TrackedFileStatuses.uploading:\n                    result = !this.wasInStatus(TrackedFileStatuses.uploadCompleted)\n                        && fromStatus === TrackedFileStatuses.pendingUpload;\n                    break;\n                case TrackedFileStatuses.uploadCompleted:\n                    // one-time status, cannot be assigned twice\n                    result = !this.wasInStatus(TrackedFileStatuses.uploadCompleted)\n                        && fromStatus === TrackedFileStatuses.uploading;\n                    break;\n                case TrackedFileStatuses.cancelled:\n                    result = ([TrackedFileStatuses.cancelled, TrackedFileStatuses.uploadCompleted, TrackedFileStatuses.purged].indexOf(fromStatus) === -1);\n                    break;\n                case TrackedFileStatuses.failure:\n                    // always allow changing to 'failure' status (assuming 'purge' is handled separately before)\n                    result = ([TrackedFileStatuses.uploadCompleted, TrackedFileStatuses.purged].indexOf(fromStatus) === -1);\n                    break;\n                case TrackedFileStatuses.purged:\n                    // one-time status, cannot be assigned twice\n                    result = !this.wasInStatus(TrackedFileStatuses.purged);\n                    break;\n                default:\n                    throw new Error(`unknown status provided '${toStatus}'`);\n            }\n        }\n\n        return result;\n    }\n\n}\n","import {merge, MonoTypeOperatorFunction, Observable, Operator, Subject, Subscriber, TeardownLogic} from \"rxjs\";\nimport {OnDestroy} from \"@angular/core\";\n\nconst __ngOnDestroySource__ = Symbol(\"__ngOnDestroySource__\");\nconst __ngOnDestroy__ = Symbol(\"__ngOnDestroy__\");\n\ninterface EnhancedOnDestroy extends OnDestroy {\n  [__ngOnDestroySource__]: Subject<string>;\n  [__ngOnDestroy__]: () => void;\n}\n\nexport function cancelOnDestroy<T>(instance: OnDestroy,\n                                   manualDestroy?: Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new CancelOnDestroyOperator(instance, manualDestroy));\n}\n\nclass CancelOnDestroyOperator<T> implements Operator<T, T> {\n  constructor(private instance: OnDestroy, private manualDestroy?: Observable<any>) {\n    if (instance.ngOnDestroy) {\n      if (!(<EnhancedOnDestroy>instance)[__ngOnDestroySource__]) {\n        (<EnhancedOnDestroy>instance)[__ngOnDestroySource__] = new Subject();\n        (<EnhancedOnDestroy>instance)[__ngOnDestroy__] = instance.ngOnDestroy;\n\n        instance.ngOnDestroy = function (this: EnhancedOnDestroy) {\n\n          this[__ngOnDestroy__].apply(this, arguments);\n          this[__ngOnDestroySource__].next();\n          this[__ngOnDestroySource__].complete();\n        };\n      }\n    }\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n\n    return source.subscribe(new CancelOnDestroySubscriber(subscriber, <EnhancedOnDestroy>this.instance, this.manualDestroy));\n  }\n}\n\nclass CancelOnDestroySubscriber<T> extends Subscriber<T> {\n  constructor(destination: Subscriber<T>,\n              private _instance: EnhancedOnDestroy,\n              private manualDestroy?: Observable<any>) {\n    super(destination);\n\n    const sources = manualDestroy\n      ? merge(manualDestroy, _instance[__ngOnDestroySource__])\n      : _instance[__ngOnDestroySource__].asObservable();\n\n    this.add(sources.subscribe(\n      () => {\n        destination.unsubscribe();\n      }\n    ));\n  }\n}\n","import {MonoTypeOperatorFunction, Observable, Operator, Subscriber, TeardownLogic} from \"rxjs\";\nimport {OperationTagStoreMediator} from \"../../operation-tag/operation-tag-store-mediator\";\n\nexport function tag<T>(action): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new TagOperator(action));\n}\n\nclass TagOperator<T> implements Operator<T, T> {\n  constructor(private _tag: string) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new TagSubscriber(subscriber, this._tag));\n  }\n}\n\nclass TagSubscriber<T> extends Subscriber<T> {\n  private _isDecreased = false;\n\n  constructor(destination: Subscriber<T>,\n              private _tag: string) {\n    super(destination);\n\n    OperationTagStoreMediator.increase(this._tag);\n  }\n\n\n  protected _error(err: any) {\n    if (this._tag && !this._isDecreased) {\n\n      this._isDecreased = true;\n      OperationTagStoreMediator.decrease(this._tag);\n    }\n    super._error(err);\n  }\n\n  protected _complete() {\n    if (this._tag && !this._isDecreased) {\n      this._isDecreased = true;\n      OperationTagStoreMediator.decrease(this._tag);\n    }\n    super._complete();\n  }\n\n  unsubscribe() {\n    if (!this.closed && this._tag && !this._isDecreased) {\n      this._isDecreased = true;\n      OperationTagStoreMediator.decrease(this._tag);\n    }\n\n    super.unsubscribe();\n  }\n}\n","import { OnDestroy, Injectable, Inject, Optional, InjectionToken } from '@angular/core';\nimport { UploadFileData } from './upload-file-data';\nimport { UploadFileAdapter } from './upload-file-adapter';\nimport { Subject, Observable } from 'rxjs';\nimport 'rxjs/add/operator/groupBy';\nimport { FriendlyHashId } from '../friendly-hash-id';\nimport { TrackedFile, TrackedFileChanges, TrackedFileData, TrackedFileStatuses } from './tracked-file';\nimport { cancelOnDestroy } from '../rxjs/operators';\n\nexport interface TrackedFiles {\n    [id: string]: TrackedFile\n}\n\nexport const UploadFileAdapterToken = new InjectionToken<string>('upload-file-adapter');\n\n@Injectable()\nexport class UploadManagement implements OnDestroy {\n    private _trackedFiles: TrackedFiles = {};\n    private _onTrackedFileChanged = new Subject<TrackedFileData>();\n    private _maxUploadRequests: number = null;\n    public onTrackedFileChanged$ = this._onTrackedFileChanged.asObservable();\n    private _tokenGenerator = new FriendlyHashId();\n    syncUploadQueueTimeoutId : number;\n\n    constructor(@Inject(UploadFileAdapterToken) @Optional() private _uploadFileAdapter: UploadFileAdapter<any>[]) {\n\n    }\n\n    public setMaxUploadRequests(maxUploads?: number): void {\n        if (maxUploads === null || maxUploads > 0) {\n            this._log('info', `limit max upload requests to ${maxUploads}`);\n            this._maxUploadRequests = maxUploads;\n        } else {\n            this._log('info', `remove max upload limitation`);\n            this._maxUploadRequests = null;\n        }\n    }\n\n    // TODO [kmcng] replace this function with log library\n    private _log(level: 'silly' | 'debug' | 'info' | 'warn' | 'error', message: string, fileId?: string): void {\n        const messageContext = fileId ? `file '${fileId}'` : '';\n        const origin = 'upload manager';\n        const formattedMessage = `log: [${level}] [${origin}] ${messageContext}: ${message}`;\n        switch (level) {\n            case 'silly':\n            case 'debug':\n            case 'info':\n                console.log(formattedMessage);\n                break;\n            case 'warn':\n                console.warn(formattedMessage);\n                break;\n            case 'error':\n                console.error(formattedMessage);\n                break;\n        }\n    }\n\n    public getTrackedFiles(): TrackedFileData[]\n    {\n        return Object.keys(this._trackedFiles).map(fileId => this._trackedFiles[fileId].asData());\n    }\n\n    public getTrackedFile(fileId: string): TrackedFileData\n    {\n        const relevantFile = this._trackedFiles[fileId];\n        return relevantFile? relevantFile.asData() : null;\n    }\n\n    public addFile(file: UploadFileData): { id: string } {\n        const [newFileId] = this.addFiles([file]);\n        return newFileId;\n    }\n\n    public addFiles(files: UploadFileData[]): { id: string, data: UploadFileData }[] {\n\n        const result: { id: string, data: UploadFileData }[] = [];\n\n        files.forEach((fileData) => {\n\n            const newUploadId = this._tokenGenerator.generateUnique(Object.keys(this._trackedFiles));\n\n            this._log('info', `add new file '${fileData.getFileName()}' to queue with unique file id`,newUploadId);\n            this._createTrackedFile(newUploadId, fileData);\n\n            result.push({id: newUploadId, data: fileData});\n        });\n\n        if (result.length)\n        {\n            this._syncUploadQueue();\n        }\n\n\n        return result;\n    }\n\n    public cancelUploadWithError(id: string, reason: string) : void {\n        this._log('info', `cancel file upload with custom reason '${reason}'`,id);\n\n        const trackedFile = this._trackedFiles[id];\n\n        if (trackedFile) {\n            {\n                if (trackedFile.canTransitionTo(TrackedFileStatuses.cancelled)) {\n                    this.cancelUpload(id, false);\n\n                  if (trackedFile.canTransitionTo(TrackedFileStatuses.failure)) {\n                    this._updateTrackedFile(trackedFile,\n                      {\n                        status: TrackedFileStatuses.failure,\n                        failureReason: reason || 'unknown error',\n                        failureType: 'manual_error'\n                      }\n                    );\n                  }\n                }\n            }\n        }else\n        {\n            this._log('warn','cannot cancel upload, failed to find file with provided id',id);\n        }\n    }\n\n\n    public resumeUpload(id: string): void {\n      this.resumeUploads([id]);\n    }\n\n    public resumeUploads(files: string[]): void {\n        let syncUploadQueue = false;\n\n        files.forEach(id => {\n            this._log('info', `resume file upload.`, id);\n            const trackedFile = this._trackedFiles[id];\n\n            if (trackedFile) {\n                if (trackedFile.wasInStatus(TrackedFileStatuses.prepared)) {\n                    this._updateTrackedFile(trackedFile, {\n                        status: TrackedFileStatuses.pendingUpload\n                    });\n                } else {\n                    this._updateTrackedFile(trackedFile, {\n                        status: TrackedFileStatuses.pendingPrepare\n                    });\n                }\n            } else {\n                this._log('warn', 'cannot resume upload, failed to find file with provided id', id);\n            }\n        });\n\n        this._syncUploadQueue();\n    }\n\n    public cancelUpload(id: string, purge: boolean= true): void {\n        this._log('info', `cancel file upload.`, id);\n\n        const trackedFile = this._trackedFiles[id];\n\n        if (trackedFile) {\n            if (trackedFile.status !== TrackedFileStatuses.cancelled\n                && trackedFile.canTransitionTo(TrackedFileStatuses.cancelled))\n            {\n                if (trackedFile.uploadSubscription) {\n                    trackedFile.uploadSubscription.unsubscribe();\n                    trackedFile.uploadSubscription = null;\n                }\n\n                this._updateTrackedFile(trackedFile,\n                    {\n                        status: TrackedFileStatuses.cancelled\n                    });\n\n                if (purge) {\n                    this.purgeUpload(id);\n                }\n\n                this._syncUploadQueue();\n            }\n        }else\n        {\n            this._log('warn', 'cannot cancel upload, failed to find file with provided id', id);\n        }\n    }\n\n    public purgeUpload(id: string): void {\n\n        this._log('info', `purge file from queue.`, id);\n\n        const trackedFile = this._trackedFiles[id];\n\n        if (trackedFile)\n        {\n            if (trackedFile.canTransitionTo(TrackedFileStatuses.purged)) {\n\n                this.cancelUpload(id, false);\n\n                this._updateTrackedFile(trackedFile, {status: TrackedFileStatuses.purged});\n\n                this._removeTrackedFile(trackedFile);\n            }\n        }else\n        {\n            this._log('warn', 'cannot purge upload, failed to find file with provided id', id);\n        }\n    }\n\n    private _removeTrackedFile(trackedFile: TrackedFile) {\n        this._log('info', `remove tracked file from queue`, trackedFile.id);\n\n        // Developer notice - this is a cleanup function just in case.\n        if (trackedFile.uploadSubscription) {\n            trackedFile.uploadSubscription.unsubscribe();\n            trackedFile.uploadSubscription = null;\n        }\n\n        delete this._trackedFiles[trackedFile.id];\n    }\n\n    private _syncUploadQueue(): void {\n        if (this.syncUploadQueueTimeoutId) {\n            clearTimeout(this.syncUploadQueueTimeoutId);\n            this.syncUploadQueueTimeoutId = null;\n        }\n\n        // DEVELOPER NOTICE: This logic is delayed to the next event loop on purpose to prevent\n        // collision between two sync requests\n        this.syncUploadQueueTimeoutId = setTimeout(() => {\n            this._log('info', `syncing upload queue`);\n            this.syncUploadQueueTimeoutId = null;\n            this._executePreparePhase();\n            this._executeUploadPhase();\n        }, 200);\n    }\n\n    private _executePreparePhase(): void {\n        const files = Object.keys(this._trackedFiles).map(fileId => this._trackedFiles[fileId]).filter(trackedFile => {\n            return trackedFile.status === TrackedFileStatuses.pendingPrepare\n                && trackedFile.canTransitionTo(TrackedFileStatuses.preparing);\n        });\n\n        if (files.length)\n        {\n            this._log('info',`handling ${files.length} files, waiting to be prepared`);\n\n            const groupedFiles = files.reduce((acc: { adapter: UploadFileAdapter<any>, files: TrackedFile[] }[], curr : TrackedFile) => {\n                const uploadAdapter = this._getUploadAdapter(curr.data) || null;\n\n                const matchedItem = acc.find(item => item.adapter ? item.adapter.constructor === uploadAdapter.constructor : item.adapter === null);\n\n                if (matchedItem) {\n                    matchedItem.files.push(curr);\n                } else {\n                    acc.push({adapter: uploadAdapter, files: [curr]});\n                }\n\n                return acc;\n            }, []);\n\n            groupedFiles.forEach(item => {\n                if (item.adapter) {\n                    this._log('debug', `executing prepare phase for ${item.files.length} files with adapter '${item.adapter.label}'`);\n\n                    item.files.forEach(file =>\n                    {\n                        this._updateTrackedFile(file,{ status : TrackedFileStatuses.preparing});\n                    });\n\n                    item.adapter.prepare(item.files)\n                        .pipe(cancelOnDestroy(this))\n                        .subscribe(\n                            preparedFiles => {\n                                this._log('debug', `executing prepare phase succeeded for ${item.files.length} files with adapter '${item.adapter.label}'.`);\n                                this._handlePrepareAdapterResponse(preparedFiles);\n\n                                this._syncUploadQueue();\n                            },\n                            reason => {\n\n                                this._log('error', `executing prepare phase failed for ${item.files.length} files with adapter '${item.adapter.label}'. error: ${reason.message}`);\n\n                                this._handlePrepareAdapterResponse(\n                                    item.files.map(file =>({ id: file.id, status:false}))\n                                );\n\n                                this._syncUploadQueue();\n                            });\n\n                }\n                else {\n                    item.files.forEach(file => {\n                        this._updateTrackedFile(file,\n                            {\n                                status: TrackedFileStatuses.failure,\n                                failureReason: 'upload destination is not supported',\n                                failureType: 'unknown_destination'\n                            })\n                    })\n                }\n            });\n        }\n    }\n\n    private _handlePrepareAdapterResponse(responseFiles : { id: string, status:boolean}[]) : void {\n        responseFiles.forEach(\n            responseFile => {\n                const trackedFile = this._trackedFiles[responseFile.id];\n\n                if (!trackedFile) {\n                    this._log('warn', `cannot handle prepare response for file '${responseFile.id}' since there is no tracking information for that file (did the user purge the file during the prepare execution?)`);\n                }\n                else if (trackedFile.status !== TrackedFileStatuses.preparing) {\n                    this._log('warn', `cannot handle file result from prepare action (did the user cancel the file upload during the prepare execution?)`, trackedFile.id);\n                } else if (responseFile.status) {\n                    const changedStatusToPrepared = this._updateTrackedFile(trackedFile,\n                        {\n                            status: TrackedFileStatuses.prepared\n                        });\n\n                    if (changedStatusToPrepared) {\n                        this._updateTrackedFile(trackedFile,\n                            {\n                                status: TrackedFileStatuses.pendingUpload\n                            });\n                    }\n                } else {\n                    this._updateTrackedFile(trackedFile,\n                        {\n                            status: TrackedFileStatuses.failure,\n                            failureReason: 'failed to prepare upload',\n                            failureType: 'preparation_failed'\n                        });\n                }\n            });\n    }\n\n    private _executeUploadPhase(): void {\n        const waitingForUploadsFiles = [];\n        const activeUploadFiles = [];\n\n        Object.keys(this._trackedFiles).forEach(fileId =>\n        {\n            const trackedFile = this._trackedFiles[fileId];\n\n            if (trackedFile.status === TrackedFileStatuses.uploading)\n            {\n                activeUploadFiles.push(trackedFile);\n            }else if (trackedFile.status === TrackedFileStatuses.pendingUpload\n                && trackedFile.canTransitionTo(TrackedFileStatuses.uploading))\n            {\n                waitingForUploadsFiles.push(trackedFile);\n            }\n        });\n\n        const activeUploadsCount = activeUploadFiles.length;\n        const waitingFilesCount = waitingForUploadsFiles.length;\n\n        if (waitingFilesCount > 0) {\n            let nextUploadFiles: TrackedFile[] = [];\n\n            this._log('silly', `active uploads: ${activeUploadsCount} | pending files: ${waitingFilesCount}`);\n\n            const availableUploadSlots = (this._maxUploadRequests && this._maxUploadRequests > 0) ? this._maxUploadRequests - activeUploadsCount : waitingFilesCount;\n\n            if (availableUploadSlots > 0) {\n                nextUploadFiles = [\n                    ...waitingForUploadsFiles.sort(pendingFile => pendingFile.uploadOrder || 1000)\n                ].slice(0, availableUploadSlots);\n            }\n\n            this._log('debug', `available upload slots to be used ${availableUploadSlots}`);\n\n\n            nextUploadFiles.forEach(pendingFile => {\n                this._initiateUpload(pendingFile);\n            });\n        }\n    }\n\n    private _createTrackedFile(id: string, fileData: UploadFileData): void {\n        const newTrackedFile = this._trackedFiles[id] = new TrackedFile(id, fileData);\n\n        this._onTrackedFileChanged.next(newTrackedFile.asData());\n\n        this._updateTrackedFile(newTrackedFile,\n            {status: TrackedFileStatuses.pendingPrepare}\n        );\n    }\n\n    private _updateTrackedFile(trackedFile: TrackedFile, changes: TrackedFileChanges): boolean {\n\n        let result = true;\n\n        if (changes.status && changes.status !== trackedFile.status) {\n\n\n            if (trackedFile.canTransitionTo(changes.status))\n            {\n                this._log('info', `notify file status changes from '${trackedFile.status}' to '${changes.status}'`,trackedFile.id);\n                trackedFile.update(changes);\n            }else\n            {\n                this._log('error', `cannot update file data from '${trackedFile.status}' to '${changes.status}. target status is not allowed. update to status 'failure' instead.`,trackedFile.id);\n\n                trackedFile.update({\n                    status: TrackedFileStatuses.failure,\n                    failureReason: 'cannot change status',\n                    failureType: 'change_not_allowed'\n                });\n\n                result = false;\n            }\n        }else\n        {\n            //this._log('info', `notify file data changes`,trackedFile.id);\n            trackedFile.update(changes)\n        }\n\n        this._onTrackedFileChanged.next(trackedFile.asData());\n\n        return result;\n    }\n\n    public supportChunkUpload(uploadFileData: UploadFileData) : boolean {\n        const uploadAdapter: UploadFileAdapter<any> = this._getUploadAdapter(uploadFileData);\n        return uploadAdapter ? uploadAdapter.supportChunkUpload() : false;\n    }\n\n    private _initiateUpload(trackedFile: TrackedFile): void {\n\n        const {data, id} = trackedFile;\n        const uploadAdapter: UploadFileAdapter<any> = this._getUploadAdapter(data);\n\n        this._log('info', `initiate new upload for file '${id}'`);\n\n        if (!uploadAdapter) {\n            this._log('warn', `cannot find destination adapter for requested file, failing upload request`);\n            this._updateTrackedFile(trackedFile,\n                {\n                    status: TrackedFileStatuses.failure,\n                    failureReason: 'upload destination is not supported',\n                    failureType: 'unknown_destination'\n                });\n\n            this._syncUploadQueue();\n\n        } else if (trackedFile.canTransitionTo(TrackedFileStatuses.uploading)) {\n            if (trackedFile.uploadSubscription) {\n                this._log('warn', `an active upload was found while the status indicated no upload currently in progress. cancel previous upload`);\n                trackedFile.uploadSubscription.unsubscribe();\n                trackedFile.uploadSubscription = null;\n            }\n\n            this._updateTrackedFile(trackedFile, {\n                status: TrackedFileStatuses.uploading,\n                progress: 0,\n                uploadStartAt: new Date(),\n            });\n\n            const canHandleResponse = (id: string, actionDescription: string) : boolean =>\n            {\n                let result = false;\n                const trackedFileStillExists = !!this._trackedFiles[id];\n\n                if (!trackedFileStillExists) {\n                    this._log('warn', `cannot handle file upload ${actionDescription}. There is no tracking file with the provided id (was the file purged?)`, id);\n                } else if (trackedFile.status !== TrackedFileStatuses.uploading) {\n                    this._log('warn', `cannot handle file upload ${actionDescription}. The file status it not 'uploading' (was the file upload cancelled?)`, id);\n                }else {\n                    result = true;\n                }\n\n                return result;\n            };\n\n            trackedFile.uploadSubscription = uploadAdapter.upload(id, data)\n                .subscribe(\n                    (uploadChanges) => {\n                        if (canHandleResponse(id, 'progress'))\n                        {\n                            this._updateTrackedFile(trackedFile,\n                                {\n                                    progress: uploadChanges.progress\n                                });\n                        }\n                    },\n                    (error) => {\n                        trackedFile.uploadSubscription = null;\n\n                        if (canHandleResponse(id, 'failure')) {\n                            const failureReason = error && error.message ? error.message : '';\n\n                            this._updateTrackedFile(trackedFile,\n                                {\n                                    status: TrackedFileStatuses.failure,\n                                    failureReason,\n                                    failureType: 'general_error'\n                                });\n                        }\n\n                        this._syncUploadQueue();\n                    },\n                    () => {\n                        trackedFile.uploadSubscription = null;\n\n                        if (canHandleResponse(id, 'completion')) {\n                            this._updateTrackedFile(trackedFile,\n                                {\n                                    status: TrackedFileStatuses.uploadCompleted,\n                                    progress: 1,\n                                    uploadCompleteAt: new Date()\n                                });\n\n                            this._removeTrackedFile(trackedFile);\n                            this._syncUploadQueue();\n                        }\n                    }\n                );\n        }\n    }\n\n    private _getUploadAdapter(fileData: UploadFileData): UploadFileAdapter<any> {\n\n        if (this._uploadFileAdapter) {\n            return this._uploadFileAdapter.find(uploadFileAdapter => {\n                return uploadFileAdapter.canHandle(fileData);\n            });\n        } else {\n            return null;\n        }\n    }\n\n    ngOnDestroy(): void {\n        Object.keys(this._trackedFiles).forEach(id =>\n        {\n            this.purgeUpload(id);\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { UploadManagement } from './upload-management.service';\n\n@NgModule({\n    imports: [\n    ],\n    declarations: [\n    ],\n    exports: [\n    ],\n    providers: [\n        UploadManagement\n    ]\n})\nexport class UploadManagementModule {\n\n}\n","import { Observable } from 'rxjs';\nimport { UploadFileData } from './upload-file-data';\n\n\nexport abstract class UploadFileAdapter<T extends UploadFileData>{\n    abstract get label() : string;\n    abstract prepare(files : {id: string, data : T}[]) : Observable<{id: string, status: boolean}[]>;\n    abstract upload(id: string, data : T) : Observable<{ id : string, progress? : number}>;\n    abstract canHandle(uploadFile : UploadFileData) : boolean;\n    abstract supportChunkUpload(): boolean;\n}\n","//download.js v4.2, by dandavis; 2008-2016. [CCBY2] see http://danml.com/download.html for tests/usage\nexport const Download = function (data, strFileName, strMimeType) {\n\tvar self = window, // this script is only for browsers anyway...\n\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\tmimeType = strMimeType || defaultMime,\n\t\tpayload = data,\n\t\turl = !strFileName && !strMimeType && payload,\n\t\tanchor = document.createElement(\"a\"),\n\t\ttoString = function(a){return String(a);},\n\t\tmyBlob = (self['Blob'] || self['MozBlob'] || self['WebKitBlob'] || toString),\n\t\tfileName = strFileName || \"download\",\n\t\tblob,\n\t\treader;\n\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\n\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\tpayload=[payload, mimeType];\n\t\tmimeType=payload[0];\n\t\tpayload=payload[1];\n\t}\n\n\t//go ahead and download dataURLs right away\n\tif(/^data\\:[\\w+\\-]+\\/[\\w+\\-]+[,;]/.test(payload)){\n\n\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\tmimeType=payload.type || defaultMime;\n\t\t}else{\n\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\tsaver(payload, false) ; // everyone else can save dataURLs un-processed\n\t\t}\n\n\t}//end if dataURL passed?\n\n\tblob = payload instanceof myBlob ?\n\t\tpayload :\n\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\tfunction dataUrlToBlob(strUrl) {\n\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\treturn new myBlob([uiArr], {type: type});\n\t}\n\n\tfunction saver(url, winMode){\n\n\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\tanchor.href = url;\n\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\tanchor.className = \"download-js-link\";\n\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\tanchor.style.display = \"none\";\n\t\t\tdocument.body.appendChild(anchor);\n\t\t\tsetTimeout(function() {\n\t\t\t\tanchor.click();\n\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t}, 66);\n\t\t\treturn true;\n\t\t}\n\n\t\t// handle non-a[download] safari as best we can:\n\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\turl=url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\t//do iframe dataURL download (old ch+FF):\n\t\tvar f = document.createElement(\"iframe\");\n\t\tdocument.body.appendChild(f);\n\n\t\tif(!winMode){ // force a mime that will download:\n\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t}\n\t\tf.src=url;\n\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t}//end saver\n\n\n\n\n\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\treturn navigator.msSaveBlob(blob, fileName);\n\t}\n\n\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\tsaver(self.URL.createObjectURL(blob), true);\n\t}else{\n\t\t// handle non-Blob()+non-URL browsers:\n\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\ttry{\n\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob), false  );\n\t\t\t}catch(y){\n\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob), false  );\n\t\t\t}\n\t\t}\n\n\t\t// Blob but not URL support:\n\t\treader=new FileReader();\n\t\treader.onload=function(e){\n\t\t\tsaver(this.result, false);\n\t\t};\n\t\treader.readAsDataURL(blob);\n\t}\n\treturn true;\n};\n","import { Download } from './download';\n\nconst _xmlCharMap = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;'\n};\n\nexport class KalturaUtils\n{\n    static escapeXml(value: any) : string {\n        let parsedValue = value;\n        switch(typeof value)\n        {\n            case 'string':\n            case 'number':\n            case 'boolean':\n                parsedValue = value;\n                break;\n            default:\n            parsedValue = value || '';\n                break;\n        }\n\n        return String(parsedValue).replace(/[&<>]/g, char => _xmlCharMap[char]);\n    }\n\n\tstatic getStartDateValue(value : Date) : Date\n    {\n        if (value) {\n            const newValue = new Date(value.getTime());\n            newValue.setHours(0);\n            newValue.setMinutes(0);\n            newValue.setSeconds(0);\n            return newValue;\n        }else{\n            return null;\n        }\n    }\n\n    static getEndDateValue(value : Date) : Date\n    {\n        if (value) {\n            const newValue = new Date(value.getTime());\n            newValue.setHours(23);\n            newValue.setMinutes(59);\n            newValue.setSeconds(59);\n            return newValue;\n        }else{\n            return null;\n        }\n    }static removeEmptyProperties(value : {})\n\t{\n\t\tObject.keys(value).forEach(function(key) {\n\t\t\tif (value[key] && typeof value[key] === 'object') {\n\t\t\t\tKalturaUtils.removeEmptyProperties(value[key]);\n\t\t\t}\n\t\t\telse if (value[key] === null) {\n\t\t\t\tdelete value[key]\n\t\t\t}\n\t\t});\n\t\treturn value;\n\t}\n\n    static moveUpItems<T>(list: T[], selectedItems : T[]): boolean {\n        if (list && list.length && selectedItems && selectedItems.length) {\n            const relevantItems = selectedItems.map(item => ({ selectedItem: item, index: list.indexOf(item) }))\n                .filter(item => item.index !== -1)\n                .sort((a, b) => a.index - b.index);\n            if (relevantItems.length) {\n                const minIndexInSelected = relevantItems[0].index;\n                const nextIndex = Math.max(0, minIndexInSelected - 1);\n                relevantItems.forEach((item, i) => {\n                    list.splice(item.index - i, 1);\n                });\n\n                list.splice(nextIndex, 0, ...relevantItems.map(item => item.selectedItem));\n\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    static moveDownItems<T>(list: T[], selectedItems : T[]): boolean {\n        if (selectedItems && selectedItems.length && list && list.length) {\n            const relevantItems = selectedItems.map(item => ({ selectedItem: item, index: list.indexOf(item) }))\n                .filter(item => item.index !== -1)\n                .sort((a, b) => a.index - b.index);\n            if (relevantItems.length) {\n                const maxIndexInSelected = relevantItems[relevantItems.length - 1].index;\n                const nextIndex = Math.min(list.length - 1, maxIndexInSelected + 1);\n                relevantItems.forEach((item, i) => {\n                    list.splice(item.index - i, 1);\n                });\n                const correctedIndex = nextIndex - relevantItems.length;\n\n                list.splice(correctedIndex + 1, 0, ...relevantItems.map(item => item.selectedItem));\n\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    static formatTime(value: number, addTimeChars: boolean = false): string {\n\n        let hours: number = Math.floor( Math.round( value ) / 3600 ) % 24;\n        let minutes: number = Math.floor( ( Math.round( value ) / 60 ) % 60 );\n        let seconds: number = Math.round(value) % 60;\n\n        let hoursStr: string = hours === 0 ? '' : addTimeChars ? hours.toString() + \"h:\" : hours.toString() + \":\";\n        let minutesStr: string = minutes === 0 && hours === 0 ? '00' : minutes < 10  ? '0' + minutes.toString() : minutes.toString();\n        let secondsStr: string = seconds < 10  ? '0' + seconds.toString() : seconds.toString();\n        if (addTimeChars){\n            minutesStr = minutesStr + \"m\";\n            secondsStr = secondsStr + \"s\";\n        }\n        return hoursStr + minutesStr + \":\" + secondsStr;\n    }\n\n    static fromServerDate(value : number) : Date\n    {\n        return (value ? new Date(value * 1000) : null);\n    }\n\n    static toServerDate(value : Date) : number\n    {\n        return value ? Math.round(value.getTime() / 1000) : null;\n    }\n\n    static download(data: any, strFileName: string, strMimeType: string) : Boolean\n    {\n        return Download(data, strFileName, strMimeType);\n    }\n}\n","/* Copyright 2013 William Summers, Metatribal Research\n * adapted from https://developer.mozilla.org/en-US/docs/JXON\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @author William Summers\n *\n */\nexport const XmlToJSON = (function () {\n\n    var options = { // set up the default options\n        mergeCDATA: true,\t// extract cdata and merge with text\n        grokAttr: true,\t\t// convert truthy attributes to boolean, etc\n        grokText: true,\t\t// convert truthy text/attr to boolean, etc\n        normalize: true,\t// collapse multiple spaces to single space\n        xmlns: true, \t\t// include namespaces as attribute in output\n        namespaceKey: '_ns', \t// tag name for namespace objects\n        textKey: '_text', \t// tag name for text nodes\n        valueKey: '_value', \t// tag name for attribute values\n        attrKey: '_attr', \t// tag for attr groups\n        cdataKey: '_cdata',\t// tag for cdata nodes (ignored if mergeCDATA is true)\n        attrsAsObject: true, \t// if false, key is used as prefix to name, set prefix to '' to merge children and attrs.\n        stripAttrPrefix: true, \t// remove namespace prefixes from attributes\n        stripElemPrefix: true, \t// for elements of same name in diff namespaces, you can enable namespaces and access the nskey property\n        childrenAsArray: true \t// force children into arrays\n    };\n\n    var prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n    var trimMatch = new RegExp(/^\\s+|\\s+$/g);\n\n    var grokType = function (sValue) {\n        if (/^\\s*$/.test(sValue)) {\n            return null;\n        }\n        if (/^(?:true|false)$/i.test(sValue)) {\n            return sValue.toLowerCase() === \"true\";\n        }\n        if (isFinite(sValue)) {\n            return parseFloat(sValue);\n        }\n        return sValue;\n    };\n\n    var parseString = function (xmlString : string, opt : any) {\n        return this.parseXML(stringToXML(xmlString), opt);\n    }\n\n    var parseXML = function (oXMLParent, opt?) {\n\n        // initialize options\n        for (let key in opt) {\n            options[key] = opt[key];\n        }\n\n        var vResult = {}, nLength = 0, sCollectedTxt = \"\";\n\n        // parse namespace information\n        if (options.xmlns && oXMLParent.namespaceURI) {\n            vResult[options.namespaceKey] = oXMLParent.namespaceURI;\n        }\n\n        // parse attributes\n        // using attributes property instead of hasAttributes method to support older browsers\n        if (oXMLParent.attributes && oXMLParent.attributes.length > 0) {\n            var vAttribs = {};\n\n            for (nLength; nLength < oXMLParent.attributes.length; nLength++) {\n                let oAttrib = oXMLParent.attributes.item(nLength);\n                vContent = {};\n                let attribName = '';\n\n                if (options.stripAttrPrefix) {\n                    attribName = oAttrib.name.replace(prefixMatch, '');\n\n                } else {\n                    attribName = oAttrib.name;\n                }\n\n                if (options.grokAttr) {\n                    vContent[options.valueKey] = grokType(oAttrib.value.replace(trimMatch, ''));\n                } else {\n                    vContent[options.valueKey] = oAttrib.value.replace(trimMatch, '');\n                }\n\n                if (options.xmlns && oAttrib.namespaceURI) {\n                    vContent[options.namespaceKey] = oAttrib.namespaceURI;\n                }\n\n                if (options.attrsAsObject) { // attributes with same local name must enable prefixes\n                    vAttribs[attribName] = vContent;\n                } else {\n                    vResult[options.attrKey + attribName] = vContent;\n                }\n            }\n\n            if (options.attrsAsObject) {\n                vResult[options.attrKey] = vAttribs;\n            } else {}\n        }\n\n        // iterate over the children\n        if (oXMLParent.hasChildNodes()) {\n            for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {\n                oNode = oXMLParent.childNodes.item(nItem);\n\n                if (oNode.nodeType === 4) {\n                    if (options.mergeCDATA) {\n                        sCollectedTxt += oNode.nodeValue;\n                    } else {\n                        if (vResult.hasOwnProperty(options.cdataKey)) {\n                            if (vResult[options.cdataKey].constructor !== Array) {\n                                vResult[options.cdataKey] = [vResult[options.cdataKey]];\n                            }\n                            vResult[options.cdataKey].push(oNode.nodeValue);\n\n                        } else {\n                            if (options.childrenAsArray) {\n                                vResult[options.cdataKey] = [];\n                                vResult[options.cdataKey].push(oNode.nodeValue);\n                            } else {\n                                vResult[options.cdataKey] = oNode.nodeValue;\n                            }\n                        }\n                    }\n                } /* nodeType is \"CDATASection\" (4) */\n                else if (oNode.nodeType === 3) {\n                    sCollectedTxt += oNode.nodeValue;\n                } /* nodeType is \"Text\" (3) */\n                else if (oNode.nodeType === 1) { /* nodeType is \"Element\" (1) */\n\n                    if (nLength === 0) {\n                        vResult = {};\n                    }\n\n                    // using nodeName to support browser (IE) implementation with no 'localName' property\n                    if (options.stripElemPrefix) {\n                        sProp = oNode.nodeName.replace(prefixMatch, '');\n                    } else {\n                        sProp = oNode.nodeName;\n                    }\n\n                    vContent = parseXML(oNode);\n\n                    if (vResult.hasOwnProperty(sProp)) {\n                        if (vResult[sProp].constructor !== Array) {\n                            vResult[sProp] = [vResult[sProp]];\n                        }\n                        vResult[sProp].push(vContent);\n\n                    } else {\n                        if (options.childrenAsArray) {\n                            vResult[sProp] = [];\n                            vResult[sProp].push(vContent);\n                        } else {\n                            vResult[sProp] = vContent;\n                        }\n                        nLength++;\n                    }\n                }\n            }\n        } else if (!sCollectedTxt){ // no children and no text, return null\n            if (options.childrenAsArray) {\n                vResult[options.textKey] = [];\n                vResult[options.textKey].push(null);\n            } else {\n                vResult[options.textKey] = null;\n            }\n        }\n\n        if (sCollectedTxt) {\n            if (options.grokText) {\n                let value = grokType(sCollectedTxt.replace(trimMatch, ''));\n                if (value) {\n                    vResult[options.textKey] = value;\n                }\n            } else if (options.normalize) {\n                vResult[options.textKey] = sCollectedTxt.replace(trimMatch, '').replace(/\\s+/g, \" \");\n            } else {\n                vResult[options.textKey] = sCollectedTxt.replace(trimMatch, '');\n            }\n        }\n\n        return vResult;\n    }\n\n\n    // Convert xmlDocument to a string\n    // Returns null on failure\n    var xmlToString = function (xmlDoc) {\n        try {\n            var xmlString = xmlDoc.xml ? xmlDoc.xml : (new XMLSerializer()).serializeToString(xmlDoc);\n            return xmlString;\n        } catch (err) {\n            return null;\n        }\n    }\n\n    // Convert a string to XML Node Structure\n    // Returns null on failure\n    var stringToXML = function (xmlString) {\n        try {\n            var xmlDoc = null;\n\n            if (typeof DOMParser === 'function') {\n\n                var parser = new DOMParser();\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n\n                return xmlDoc;\n            } else {\n                return null;\n                // TODO [kmcng] consider if to allow active x object\n                // xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n                // xmlDoc.async = false;\n                // xmlDoc.loadXML(xmlString);\n                //\n                // return xmlDoc;\n            }\n        } catch (e) {\n            return null;\n        }\n    }\n\n    // this is the \"revealed\"/public part of the module\n    return {\n        parseXML: parseXML,\n        parseString: parseString,\n        xmlToString: xmlToString,\n        stringToXML: stringToXML\n    };\n\n}());","import { XmlToJSON } from './xml-to-json';\nimport { KalturaUtils } from '../utils/kaltura-utils';\n\n\n\nfunction convertAttributes(attributes: object): string {\n  let parsedAttributes = '';\n  if (attributes) {\n    Object.keys(attributes).forEach(attributeName => {\n      const value = KalturaUtils.escapeXml(attributes[attributeName]);\n      parsedAttributes += ` ${attributeName}=\"${value}\"`;\n    });\n  }\n\n  return parsedAttributes;\n}\n\nfunction convertObjectToXml(prefix: string, propertyName: string, propertyValue: any): string {\n    let result = ``;\n\n    const noPrefixPropertyName = (propertyName || '').indexOf('noprefix:') !== -1;\n    if (noPrefixPropertyName) {\n      propertyName = propertyName.replace('noprefix:', '');\n      prefix = '';\n    }\n\n    if (Array.isArray(propertyValue)) {\n        propertyValue.forEach(innerItem =>\n        {\n            result += convertObjectToXml(prefix, propertyName, innerItem);\n        });\n    } else if (propertyValue && typeof propertyValue === 'object') {\n\n        const parsedAttributes = convertAttributes(propertyValue['attr']);\n        let parsedValue: any = '';\n\n        if (propertyValue['text']) {\n            parsedValue = KalturaUtils.escapeXml(propertyValue['text']);\n        } else {\n            Object.keys(propertyValue).forEach(innerProperty => {\n                if (innerProperty !== 'attr') {\n                    parsedValue += convertObjectToXml(prefix, innerProperty, propertyValue[innerProperty]);\n                }\n            });\n        }\n\n        result += `<${prefix}${propertyName}`;\n\n        if (parsedAttributes) {\n            result += `${parsedAttributes}>`;\n        } else {\n            result += '>';\n        }\n\n        result += `${parsedValue}</${prefix}${propertyName}>`;\n    }\n\n\n    return result;\n}\n\nexport class XmlParser\n{\n    static toJson(xml : string) : {}\n    {\n        return XmlToJSON.parseString(xml,\n            {\n                textKey: 'text', \t// tag name for text nodes\n                valueKey: 'value', \t// tag name for attribute values\n                attrKey: 'attr', \t// tag for attr groups\n                cdataKey: 'cdata',\t// tag for cdata nodes (ignored if mergeCDATA is true)\n                childrenAsArray: false, \t// force children into arrays\n\t            grokText: false,\n\t            grokAttr: false,\n              normalize: false,\n            });\n    }\n\n    static toXml(data: object, root: string, prefix: string = ''): string {\n        const parsedPrefix = prefix ? `${prefix}:` : '';\n        let parsedObject = '';\n        let parsedAttributes = '';\n\n        if (data) {\n            parsedAttributes = convertAttributes(data['attr']);\n\n            Object.keys(data).forEach(property => {\n                if (property !== 'attr') {\n                   parsedObject += convertObjectToXml(parsedPrefix, property, data[property])\n                }\n            });\n        }\n\n        return `<${parsedPrefix}${root}${parsedAttributes}>${parsedObject}</${parsedPrefix}${root}>`;\n    }\n\n    static toSimpleXml(data : {}, config : {removeEmpty? : boolean} = {}) : string{\n        let result = '';\n        const _parseValueToXml = (value : any) =>\n        {\n            let result : string;\n\n            if (typeof value === 'object') {\n                result = XmlParser.toSimpleXml(value, config);\n            }\n            else {\n                result = KalturaUtils.escapeXml(value);\n            }\n\n            return result;\n        };\n\n        if (data) {\n            Object.keys(data).forEach(function (key) {\n                const propertyValue = data[key];\n                const isEmptyValue = (propertyValue === null || typeof propertyValue === 'undefined' || propertyValue === '');\n\n                if (!config.removeEmpty || (config.removeEmpty && !isEmptyValue)) {\n                    if (propertyValue instanceof Array) {\n                        propertyValue.map(arrayItem => {\n                            const valueAsXml = _parseValueToXml(arrayItem);\n                            const isEmptyValue = (valueAsXml === null || typeof valueAsXml === 'undefined' || valueAsXml === '');\n\n                            if (!config.removeEmpty || (config.removeEmpty && !isEmptyValue)) {\n                                result += `<${key}>${valueAsXml}</${key}>`;\n                            }\n                        })\n                    } else if (typeof propertyValue === 'object') {\n                        const valueAsXml = _parseValueToXml(propertyValue);\n                        const isEmptyValue = (valueAsXml === null || typeof valueAsXml === 'undefined' || valueAsXml === '');\n\n                        if (!config.removeEmpty || (config.removeEmpty && !isEmptyValue)) {\n                            result += `<${key}>${valueAsXml}</${key}>`;\n                        }\n                    }\n                    else {\n                        const value = KalturaUtils.escapeXml(propertyValue);\n                        result += `<${key}>${value}</${key}>`;\n                    }\n                }\n            });\n        }\n\n        return result;\n    }\n}\n","import { InjectionToken } from '@angular/core';\n\n\nexport interface IAppStorage {\n    setInLocalStorage(key:string, value:any) : void;\n    getFromLocalStorage(key:string) : any;\n    removeFromLocalStorage(key:string) : any;\n    setInSessionStorage(key:string, value:any) : void;\n    getFromSessionStorage(key:string) : any;\n    removeFromSessionStorage(key:string) : any;\n}\n\nexport const APP_STORAGE_TOKEN: InjectionToken<IAppStorage> = new InjectionToken<IAppStorage>('APP_STORAGE_TOKEN');\n\nexport class AppStorage implements IAppStorage{\n    private storage : any = {};\n\n    setInLocalStorage(key:string, value:any):void {\n        this.storage[key] = value;\n    }\n\n    getFromLocalStorage(key:string):any {\n        return this.storage[key];\n    }\n\n    removeFromLocalStorage(key:string):any {\n       delete this.storage[key];\n    }\n\n    setInSessionStorage(key:string, value:any):void {\n        this.storage[key] = value;\n    }\n\n    getFromSessionStorage(key:string):any {\n        return this.storage[key];\n    }\n\n    removeFromSessionStorage(key:string):any {\n        delete this.storage[key];\n    }\n\n}","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { KalturaUtils } from './utils/kaltura-utils';\nimport { APP_STORAGE_TOKEN, AppStorage } from './app-storage.service';\nimport { EmptyLogger, KalturaLoggerInjectionToken } from './kaltura-logger';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n    ],\n    declarations: [\n    ],\n    exports: [\n    ],\n    providers: [\n        ]\n})\nexport class KalturaCommonModule {\n    // constructor(@Optional() @SkipSelf() module : KalturaCoreModule, private appBootstrap : AppBootstrap)\n    // {\n    //     if (module) {\n    //         throw new Error(\"KMCngCoreModule module imported twice.\");\n    //     }\n    // }\n\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: KalturaCommonModule,\n            providers: [\n                { provide: APP_STORAGE_TOKEN, useClass: AppStorage },\n\t            KalturaUtils,\n                { provide: KalturaLoggerInjectionToken, useClass: EmptyLogger}\n            ]\n        };\n    }\n}\n"],"names":["BehaviorSubject","Injectable","Self","Optional","NgModule","InjectionToken","Observable","Subject","merge","Subscriber","Inject","CommonModule"],"mappings":";;;;;;IAAA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;AACA;IACA,IAAI,aAAa,GAAG,SAAS,CAAC,EAAE,CAAC,EAAE;IACnC,IAAI,aAAa,GAAG,MAAM,CAAC,cAAc;IACzC,SAAS,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;IACpF,QAAQ,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACnF,IAAI,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;AACF;IACO,SAAS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE;IAChC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxB,IAAI,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;IAC3C,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AACD;IACO,IAAI,QAAQ,GAAG,WAAW;IACjC,IAAI,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC,EAAE;IACrD,QAAQ,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;IAC7D,YAAY,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;IAC7B,YAAY,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,SAAS;IACT,QAAQ,OAAO,CAAC,CAAC;IACjB,MAAK;IACL,IAAI,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IAC3C,EAAC;AACD;IACO,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;IAC7B,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;IACf,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IACvF,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,qBAAqB,KAAK,UAAU;IACvE,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IAChF,YAAY,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1F,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClC,SAAS;IACT,IAAI,OAAO,CAAC,CAAC;IACb,CAAC;AACD;IACO,SAAS,UAAU,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;IAC1D,IAAI,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;IACjI,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;IACnI,SAAS,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;IACtJ,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAClE,CAAC;AACD;IACO,SAAS,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE;IAC/C,IAAI,OAAO,UAAU,MAAM,EAAE,GAAG,EAAE,EAAE,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC,EAAE;IACzE,CAAC;AACD;IACO,SAAS,UAAU,CAAC,WAAW,EAAE,aAAa,EAAE;IACvD,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;IACnI,CAAC;AACD;IACO,SAAS,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE;IAC7D,IAAI,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,MAAM,EAAE;IAC/D,QAAQ,SAAS,SAAS,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;IACnG,QAAQ,SAAS,QAAQ,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;IACtG,QAAQ,SAAS,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,UAAU,OAAO,EAAE,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,EAAE;IACvJ,QAAQ,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9E,KAAK,CAAC,CAAC;IACP,CAAC;AACD;IACO,SAAS,WAAW,CAAC,OAAO,EAAE,IAAI,EAAE;IAC3C,IAAI,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACrH,IAAI,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,WAAW,EAAE,OAAO,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC7J,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE,EAAE,OAAO,UAAU,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;IACtE,IAAI,SAAS,IAAI,CAAC,EAAE,EAAE;IACtB,QAAQ,IAAI,CAAC,EAAE,MAAM,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;IACtE,QAAQ,OAAO,CAAC,EAAE,IAAI;IACtB,YAAY,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACzK,YAAY,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;IACpD,YAAY,QAAQ,EAAE,CAAC,CAAC,CAAC;IACzB,gBAAgB,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM;IAC9C,gBAAgB,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;IACxE,gBAAgB,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS;IACjE,gBAAgB,KAAK,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS;IACjE,gBAAgB;IAChB,oBAAoB,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,EAAE;IAChI,oBAAoB,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;IAC1G,oBAAoB,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM,EAAE;IACzF,oBAAoB,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE;IACvF,oBAAoB,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;IAC1C,oBAAoB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS;IAC3C,aAAa;IACb,YAAY,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IACvC,SAAS,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;IAClE,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;IACzF,KAAK;IACL,CAAC;AACD;IACO,SAAS,YAAY,CAAC,CAAC,EAAE,OAAO,EAAE;IACzC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACvE,CAAC;AACD;IACO,SAAS,QAAQ,CAAC,CAAC,EAAE;IAC5B,IAAI,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;IACtE,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC5B,IAAI,OAAO;IACX,QAAQ,IAAI,EAAE,YAAY;IAC1B,YAAY,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC;IAC/C,YAAY,OAAO,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC;IACpD,SAAS;IACT,KAAK,CAAC;IACN,CAAC;AACD;IACO,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;IAC7B,IAAI,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC/D,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IACrB,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;IACrC,IAAI,IAAI;IACR,QAAQ,OAAO,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACnF,KAAK;IACL,IAAI,OAAO,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE;IAC3C,YAAY;IACZ,QAAQ,IAAI;IACZ,YAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC7D,SAAS;IACT,gBAAgB,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE;IACzC,KAAK;IACL,IAAI,OAAO,EAAE,CAAC;IACd,CAAC;AACD;IACO,SAAS,QAAQ,GAAG;IAC3B,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;IACtD,QAAQ,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,IAAI,OAAO,EAAE,CAAC;IACd,CAAC;AACD;IACO,SAAS,cAAc,GAAG;IACjC,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;IACxF,IAAI,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE;IACpD,QAAQ,KAAK,IAAI,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE;IACzE,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB,IAAI,OAAO,CAAC,CAAC;IACb,CAAC,CAAC;AACF;IACO,SAAS,OAAO,CAAC,CAAC,EAAE;IAC3B,IAAI,OAAO,IAAI,YAAY,OAAO,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IACzE,CAAC;AACD;IACO,SAAS,gBAAgB,CAAC,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE;IACjE,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,MAAM,IAAI,SAAS,CAAC,sCAAsC,CAAC,CAAC;IAC3F,IAAI,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;IAClE,IAAI,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,YAAY,EAAE,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;IAC1H,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,EAAE,EAAE,OAAO,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;IAC9I,IAAI,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE;IACtF,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,YAAY,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;IAC5H,IAAI,SAAS,OAAO,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,EAAE;IACtD,IAAI,SAAS,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,EAAE;IACtD,IAAI,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACtF,CAAC;AACD;IACO,SAAS,gBAAgB,CAAC,CAAC,EAAE;IACpC,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC;IACb,IAAI,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,YAAY,EAAE,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;IAChJ,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,KAAK,QAAQ,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;IACnJ,CAAC;AACD;IACO,SAAS,aAAa,CAAC,CAAC,EAAE;IACjC,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,MAAM,IAAI,SAAS,CAAC,sCAAsC,CAAC,CAAC;IAC3F,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;IACvC,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,OAAO,QAAQ,KAAK,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,YAAY,EAAE,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IACrN,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,EAAE,EAAE,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;IACpK,IAAI,SAAS,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,EAAE;IAChI,CAAC;AACD;IACO,SAAS,oBAAoB,CAAC,MAAM,EAAE,GAAG,EAAE;IAClD,IAAI,IAAI,MAAM,CAAC,cAAc,EAAE,EAAE,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE;IACnH,IAAI,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC;AACF;IACO,SAAS,YAAY,CAAC,GAAG,EAAE;IAClC,IAAI,IAAI,GAAG,IAAI,GAAG,CAAC,UAAU,EAAE,OAAO,GAAG,CAAC;IAC1C,IAAI,IAAI,MAAM,GAAG,EAAE,CAAC;IACpB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,KAAK,IAAI,CAAC,IAAI,GAAG,EAAE,IAAI,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;IACnG,IAAI,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC;IACzB,IAAI,OAAO,MAAM,CAAC;IAClB,CAAC;AACD;IACO,SAAS,eAAe,CAAC,GAAG,EAAE;IACrC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,UAAU,IAAI,GAAG,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;IAC5D;;IC9LA;QAAA;SAoBC;QAhBiB,kCAAQ,GAAtB,UAAuB,oBAA8C;YACjE,IAAI,CAAC,qBAAqB,GAAG,oBAAoB,CAAC;SACrD;QAEa,kCAAQ,GAAtB,UAAuB,GAAW;YAC9B,IAAI,IAAI,CAAC,qBAAqB,EAAC;gBAC3B,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAC5C;SACJ;QAEa,kCAAQ,GAAtB,UAAuB,GAAW;YAC9B,IAAI,IAAI,CAAC,qBAAqB,EAAC;gBAC3B,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAC5C;SACJ;QAhBc,+CAAqB,GAA6B,IAAI,CAAC;QAkB1E,gCAAC;KApBD;;;QCQI;YALQ,eAAU,GAAG,IAAIA,+BAAe,CAA4B,EAAE,CAAC,CAAC;;YAGjE,eAAU,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;SAGlD;;QAGD,6CAAQ,GAAR,UAAS,GAAW;YAChB,IAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;YAC5C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAChB,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aACrB;YACD,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;YAChB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAElC;QAED,6CAAQ,GAAR,UAAS,GAAW;YAChB,IAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;YAC5C,IAAI,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACnB,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBAChB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAClC;iBAAM;gBACH,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAClB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAElC;SACJ;QA/BQ,0BAA0B;YADtCC,eAAU,EAAE;;WACA,0BAA0B,CAgCtC;QAAD,iCAAC;KAhCD;;;;;QCaI,4BAAgC,0BAAsD;YAClF,IAAI,0BAA0B,EAAE;gBAC5B,yBAAyB,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;aAClE;SACJ;+BARQ,kBAAkB;QAUpB,0BAAO,GAAd;YACI,OAAO;gBACH,QAAQ,EAAE,oBAAkB;gBAC5B,SAAS,EAAS;oBACd,0BAA0B;iBAC7B;aACJ,CAAC;SACL;;;oBAb2D,0BAA0B,uBAAzEC,SAAI,YAAIC,aAAQ;;QAJpB,kBAAkB;YAV9BC,aAAQ,CAAC;gBACN,OAAO,EAAE,EACR;gBACD,YAAY,EAAE,EACb;gBACD,OAAO,EAAE,EACR;gBACD,SAAS,EAAE,EACV;aACJ,CAAC;YAKe,WAAAF,SAAI,EAAE,CAAA,EAAE,WAAAC,aAAQ,EAAE,CAAA;6CAA6B,0BAA0B;WAJ7E,kBAAkB,CAkB9B;QAAD,yBAAC;KAlBD;;ICfA,YAAY,CAAC;IACb;;;IAIA;;;;;;;IAOA,IAAI,gBAAgB,GAChB,2BAA2B,CAAC;IAEhC;IACA;IACA;IACA;IACA;IACA,IAAI,iBAAiB,GAAG,CAAC,CAAC;IAE1B;;;;IAIA,IAAI,cAAc,GAAG,IAAI,CAAC;;QAI1B;SAwDC;QArDU,uBAAQ,GAAf,UAAgB,eAAsB;YAClC,IAAI,CAAC,cAAc,CAAC,eAAe,EACnC;gBACI,cAAc,CAAC,eAAe,GAAG,IAAI,cAAc,EAAE,CAAC;aACzD;YACD,OAAO,cAAc,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;SACnE;;;;;;;;QASD,iCAAQ,GAAR,UAAS,eAAsB;YAE3B,IAAI,OAAO,GAAG,eAAe,IAAI,EAAE,CAAC;YAEpC,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,gBAAgB,CAAC;YACpD,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,iBAAiB,CAAC;YAErD,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;gBAC/B,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;aACvE;YACD,OAAO,GAAG,CAAC;SACd;QAAA,CAAC;;;;;;;QAQF,uCAAc,GAAd,UAAe,QAAgB;YAC3B,QAAQ,GAAG,QAAQ,IAAI,EAAE,CAAC;YAC1B,IAAI,OAAO,GAAG,CAAC,CAAC;YAChB,IAAI,EAAE,CAAC;;;YAIP,OAAO,CAAC,EAAE,IAAI,OAAO,GAAG,cAAc,EAAE;gBACpC,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACrB,IAAI,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC7B,EAAE,GAAG,IAAI,CAAC;oBACV,OAAO,EAAE,CAAC;iBACb;aACJ;YAED,OAAO,EAAE,CAAC;SACb;QAAA,CAAC;QApDK,8BAAe,GAAoB,IAAI,CAAC;QAsDnD,qBAAC;KAxDD;;QCzBa,2BAA2B,GAAG,IAAIE,mBAAc,CAAgB,gBAAgB,EAAE;;QA0C/F;SAwCC;QApCA,2BAAK,GAAL,UAAM,OAAe,EAAE,OAAQ;SAC9B;QAKD,2BAAK,GAAL,UAAM,OAAe,EAAE,OAAQ;SAC9B;QAKD,0BAAI,GAAJ,UAAK,OAAe,EAAE,OAAQ;SAC7B;QAKD,0BAAI,GAAJ,UAAK,OAAe,EAAE,OAAQ;SAC7B;QAKD,2BAAK,GAAL,UAAM,OAAe,EAAE,OAAQ;SAC9B;QAKD,2BAAK,GAAL,UAAM,OAAe,EAAE,OAAQ;SAC9B;QAED,+BAAS,GAAT,UAAU,IAAY;YACrB,OAAO,IAAI,WAAW,EAAE,CAAC;SACzB;QACF,kBAAC;IAAD,CAAC;;;QC7CC,qBAAY,aAA4B;YAlBhC,eAAU,GAAwC,EAAE,CAAC;YACrD,oBAAe,GAAG,IAAI,cAAc,EAAE,CAAC;YAEvC,4BAAuB,GAAG,KAAK,CAAC;YAChC,mBAAc,GAAoB,EAAE,CAAC;YACrC,WAAM,GAAG,IAAIL,+BAAe,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;YAE/C,WAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;YACnC,mBAAc,GAAW,IAAI,CAAC;YAYrC,IAAI,aAAa,EAAE;gBAClB,IAAI,CAAC,OAAO,GAAG,aAAa,CAAC;aAC7B;iBAAM;gBACN,IAAI,CAAC,OAAO,GAAG,IAAI,WAAW,EAAE,CAAC;aACjC;YACD,IAAI,CAAC,WAAW,EAAE,CAAC;SACnB;QAEO,8CAAwB,GAAhC;;YAEI,IAAM,KAAK,GAAG,2JAA2J,CAAC;YAC1K,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SAC7B;QAEO,iCAAW,GAAnB;YAAA,iBAmBC;YAlBG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;YACpC,UAAU,CAAC;gBACP,IAAM,UAAU,GAAG,KAAI,CAAC,cAAc,EAAE,CAAC;gBAEzC,IAAI,CAAC,UAAU,EAAE;oBACb,KAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;oBACpC,KAAI,CAAC,wBAAwB,EAAE,CAAC;iBACnC;qBAAM;oBACH,UAAU,CAAC,SAAS,CAAC;wBACjB,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;wBAC7C,KAAI,CAAC,oBAAoB,EAAE,CAAC;wBAC5B,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAA,IAAI;4BAC5B,IAAI,CAAC,WAAW,EAAE,CAAC;yBACtB,CAAC,CAAC;wBACH,KAAI,CAAC,cAAc,GAAG,EAAE,CAAC;qBAC5B,CAAC,CAAC;iBACN;aACJ,CAAC,CAAC;SACN;QAEO,0CAAoB,GAA5B;YACE,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAClC;QAEO,uCAAiB,GAAzB;YAAA,iBAEC;YADC,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,KAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAA,CAAC,CAAC;SACtE;QAEO,sCAAgB,GAAxB;YAAA,iBA8BC;YA7BG,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAE5B,IAAM,aAAa,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAE/C,IAAI,IAAI,CAAC,uBAAuB,EAAE;;gBAE9B,IAAI,CAAC,wBAAwB,EAAE,CAAC;aACnC;YAGD,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;gBACvB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,kFAAkF,CAAC,CAAC;gBACtG,OAAO;aACV;YAED,IAAI,WAAW,GAAW,IAAI,CAAC;YAC/B,IAAM,WAAW,GAAG,aAAa,CAAC,IAAI,CAAC,UAAC,EAAe;oBAAd,gCAAa;gBAAM,OAAA,CAAC,CAAC,aAAa;aAAA,CAAC,CAAC;YAC7E,IAAI,CAAC,WAAW,EAAE;gBACd,WAAW,GAAG,IAAI,CAAC,GAAG,OAAR,IAAI,WAAQ,aAAa,CAAC,GAAG,CAAC,UAAC,EAAU;wBAAT,sBAAQ;oBAAM,OAAA,QAAQ;iBAAA,CAAC,KAAI,CAAC,CAAC;aAC9E;YACD,WAAW,GAAG,WAAW,IAAI,WAAW,GAAG,EAAE,GAAG,WAAW,GAAG,EAAE,CAAC;YACjE,IAAI,IAAI,CAAC,cAAc,KAAK,WAAW,EAAE;gBACrC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAE,kDAAgD,WAAW,aAAU,CAAC,CAAC;gBAC1F,IAAI,CAAC,cAAc,GAAG,WAAW,CAAC;aACrC;YAED,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC;gBAC5B,KAAI,CAAC,iBAAiB,EAAE,CAAC;aAC5B,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,CAAC;SAClC;QAEM,kCAAY,GAAnB;YAAA,iBAeC;YAdG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;;YAEpD,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAA,YAAY;gBACpC,YAAY,CAAC,WAAW,EAAE,CAAC;aAC9B,CAAC,CAAC;YACH,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;;YAGzB,IAAI,CAAC,iBAAiB,EAAE,CAAC,OAAO,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,YAAY,GAAG,IAAI,GAAA,CAAC,CAAC;;YAGnE,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;iBAC9D,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,gBAAgB,EAAE,GAAA,EAAE,cAAM,OAAA,KAAI,CAAC,gBAAgB,EAAE,GAAA,CAAC,CAAC;SAChF;QAES,qCAAe,GAAvB,UAAwB,KAAyB;YAAjD,iBAwEC;YAvEG,OAAOM,eAAU,CAAC,MAAM,CAAC,UAAA,QAAQ;gBAC7B,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;gBAE7C,IAAI,CAAC,KAAI,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;oBACrD,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,sFAAsF,CAAC,CAAC;oBAC3G,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACzB,OAAO;iBACV;gBAED,IAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI;oBAC3B,IAAI,WAAqB,CAAC;oBAC1B,IAAI,KAAa,CAAC;oBAClB,IAAI;wBACA,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;qBAC9C;oBAAC,OAAO,GAAG,EAAE;wBACV,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,qCAAmC,IAAI,CAAC,EAAE,sCAAiC,GAAG,CAAC,OAAO,MAAG,CAAC,CAAC;wBAE9G,WAAW,GAAG,IAAI,CAAC;wBACnB,KAAK,GAAG,KAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;qBACxC;oBAED,IAAI,KAAK,EAAE;wBACP,KAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,EAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;qBACrE;oBACD,OAAO,WAAW,GAAG,EAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAC,GAAG,IAAI,CAAC;iBACtE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAEnB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,+BAA6B,QAAQ,CAAC,MAAM,WAAQ,CAAC,CAAC;gBAExE,IAAI,CAAC,QAAQ,CAAC,MAAM,EACpB;oBACI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC5B;qBAAK;oBACF,IAAM,cAAY,GAAG,KAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,OAAO,GAAA,CAAC,CAAC;yBACzE,SAAS,CACN,UAAA,QAAQ;wBACJ,KAAI,CAAC,mBAAmB,CAAC,cAAY,CAAC,CAAC;wBAEvC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAO,QAAQ,CAAC,MAAM,wDAAqD,CAAC,CAAC;wBAC/F,QAAQ,CAAC,OAAO,CAAC,UAAC,EAAU,EAAE,KAAK;gCAAhB,sBAAQ;4BACvB,IAAI,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;4BAC7B,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gCACvB,MAAM,GAAG,EAAE,MAAM,QAAA,EAAE,KAAK,EAAE,IAAI,EAAE,CAAA;6BACnC;4BACD,KAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;yBACnD,CAAC,CAAC;wBAEH,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBAC5B,EACD,UAAC,KAAK;wBAEF,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,4DAA0D,KAAK,CAAC,OAAO,MAAG,CAAC,CAAC;wBAC/F,KAAI,CAAC,mBAAmB,CAAC,cAAY,CAAC,CAAC;wBAEvC,IAAM,aAAa,GAAG,EAAC,KAAK,EAAE,KAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,IAAI,EAAC,CAAC;wBAC5E,QAAQ,CAAC,OAAO,CAAC,UAAC,EAAU;gCAAT,sBAAQ;4BACvB,KAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;yBAC1D,CAAC,CAAC;wBAEH,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBAC5B,CACJ,CAAC;oBACN,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,cAAY,CAAC,CAAC;oBAEvC,OAAO;wBACH,KAAI,CAAC,mBAAmB,CAAC,cAAY,CAAC,CAAC;qBAC1C,CAAC;iBACL;aAGJ,CAAC,CAAC;SACN;QAEO,yCAAmB,GAA3B,UAA4B,YAA2B;YACnD,IAAI,YAAY,EAAE;gBACd,IAAM,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;gBAEpE,IAAI,iBAAiB,GAAG,CAAC,CAAC,EAAE;oBACxB,IAAI,CAAC,cAAc,CAAC,MAAM,CACtB,iBAAiB,EACjB,CAAC,CACJ,CAAA;iBACJ;aACJ;SACJ;QAEO,uCAAiB,GAAzB;YAAA,iBAiCC;YA/BG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE;gBACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,0EAA0E,CAAC,CAAC;gBAC/F,OAAO;aACV;YAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,6BAA6B,CAAC,CAAC;YAElD,IAAM,GAAG,GAAG,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;YAC/B,IAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,EAAE;iBAC7C,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,YAAY,KAAK,CAAC,IAAI,CAAC,aAAa,KAAK,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAA,CAAC,CAAC;YAGhI,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE;gBAC3B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,sCAAsC,CAAC,CAAC;gBAC3D,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,OAAO;aACV;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC;iBAClC,SAAS,CACN;gBACI,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC,CAAC;gBAChC,KAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B,EACD,UAAC,KAAK;gBACF,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC,CAAC;aACnC,CACJ,CAAC;SACT;QAEK,8CAAwB,GAAhC,UAAiC,IAAsB,EAAE,QAAwC;YAC7F,IAAI;gBACA,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;oBAC1B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,8BAA4B,IAAI,CAAC,EAAI,CAAC,CAAC;oBAC1D,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;oBAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAChC;qBACD;oBACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,wCAAsC,IAAI,CAAC,EAAE,sGAAmG,CAAC,CAAC;iBACvK;aACJ;YAAC,OAAO,GAAG,EAAE;gBACV,IAAI,CAAC,OAAO,CAAC,IAAI,CAAE,mDAAiD,IAAI,CAAC,EAAE,mDAA8C,GAAG,CAAC,OAAS,CAAC,CAAC;aAC3I;SACJ;QAEM,4BAAM,GAAb;YACI,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC;SACtC;QAEM,8BAAQ,GAAf,UAA2B,iBAA+B,EAAE,cAAmD;YAA/G,iBAsCC;YArCC,OAAOA,eAAU,CAAC,MAAM,CAAC,UAAA,QAAQ;gBAC/B,IAAM,SAAS,GAAG,KAAI,CAAC,eAAe,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAE,+BAA6B,SAAS,qBAAgB,iBAAiB,cAAW,CAAC,CAAC;gBACzG,IAAM,WAAW,GAAqB,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG;oBACjE,EAAE,EAAE,SAAS;oBACb,QAAQ,EAAE,iBAAiB;oBAC3B,aAAa,EAAE,IAAI;oBACjB,YAAY,EAAE,KAAK;oBACrB,cAAc,EAAE,cAAc;oBAC9B,QAAQ,EAAE,QAAQ;iBACnB,CAAC;gBAEF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAE,gCAA8B,SAAS,MAAG,CAAC,CAAC;gBAC/D,IAAI,cAAc,GAAG,KAAI,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,CAAC;qBACnD,SAAS,CACN;oBAEI,cAAc,GAAG,IAAI,CAAC;oBACtB,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC;oBAChC,KAAI,CAAC,gBAAgB,EAAE,CAAC;iBAC3B,EACD;oBAEI,cAAc,GAAG,IAAI,CAAC;oBACtB,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC;oBAChC,KAAI,CAAC,gBAAgB,EAAE,CAAC;iBAC3B,CACJ,CAAC;gBAEN,OAAO;oBACH,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,sBAAoB,SAAW,CAAC,CAAC;oBACnD,IAAI,cAAc,EAAE;wBAChB,cAAc,CAAC,WAAW,EAAE,CAAC;qBAChC;oBACD,OAAO,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;iBACrC,CAAA;aACF,CAAC,CAAC;SACJ;QACH,kBAAC;IAAD,CAAC;;;QCvTD;SAWC;QAV0B,yBAAK,GAAsB,OAAO,CAAC;QACnC,kCAAc,GAAsB,gBAAgB,CAAC;QACrD,6BAAS,GAAsB,WAAW,CAAC;QAC3C,4BAAQ,GAAsB,UAAU,CAAC;QACzC,iCAAa,GAAsB,eAAe,CAAC;QACnD,6BAAS,GAAsB,WAAW,CAAC;QAC3C,mCAAe,GAAsB,iBAAiB,CAAC;QACvD,2BAAO,GAAsB,SAAS,CAAC;QACvC,6BAAS,GAAsB,WAAW,CAAC;QAC3C,0BAAM,GAAsB,QAAQ,CAAC;QAChE,0BAAC;KAXD,IAWC;;QA4CG,qBAAY,EAAU,EAAE,IAAoB;YAb5C,WAAM,GAAsB,mBAAmB,CAAC,KAAK,CAAC;YAEtD,aAAQ,GAAY,CAAC,CAAC;YACtB,qBAAgB,GAAS,IAAI,CAAC;YAC9B,gBAAW,GAAW,CAAC,CAAC;YAKhB,mBAAc,GAAgC;gBAClD,OAAO,EAAG,IAAI;aACjB,CAAC;YAIE,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;YACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SACpB;QApBD,sBAAW,2BAAE;iBAAb;gBACI,OAAO,IAAI,CAAC,GAAG,CAAC;aACnB;;;WAAA;QAoBM,4BAAM,GAAb;YACI,OAAO;gBACH,EAAE,EAAE,IAAI,CAAC,EAAE;gBACX,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,aAAa,EAAE,IAAI,CAAC,aAAa;gBACjC,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;gBACvC,WAAW,EAAE,IAAI,CAAC,WAAW;gBAC7B,WAAW,EAAE,IAAI,CAAC,WAAW;gBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;gBACjC,IAAI,EAAE,IAAI,CAAC,IAAI;aAClB,CAAC;SACL;QAEM,4BAAM,GAAb,UAAc,OAA2B;YAErC,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE;gBAClD,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,MAAM,CAAC,EACzC;oBACI,MAAM,IAAI,KAAK,CAAC,UAAQ,IAAI,CAAC,EAAE,mCAA8B,OAAO,CAAC,MAAM,MAAG,CAAC,CAAC;iBACnF;gBAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;aAC9C;YAED,MAAM,CAAC,MAAM,CAAC,IAAI,EAAC,OAAO,CAAC,CAAC;SAC/B;QAEM,iCAAW,GAAlB,UAAmB,MAAyB;YAExC,OAAO,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;SACxC;QAEM,qCAAe,GAAtB,UAAuB,QAAgB;YACnC,IAAI,MAAM,GAAY,KAAK,CAAC;YAC5B,IAAM,WAAW,GAAG,IAAI,CAAC;YACzB,IAAM,UAAU,GAAG,WAAW,GAAG,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;YAE3D,IAAI,WAAW,IAAK,UAAU,IAAI,QAAQ,EAAE;gBAExC,IAAI,UAAU,KAAK,mBAAmB,CAAC,MAAM,EAC7C;;oBAEI,MAAM,GAAG,KAAK,CAAC;iBAClB;gBAED,QAAQ,QAAQ;oBACZ,KAAK,mBAAmB,CAAC,KAAK;;wBAE1B,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;wBACtD,MAAM;oBACV,KAAK,mBAAmB,CAAC,cAAc;wBACnC,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;wBACzD,MAAM;oBACV,KAAK,mBAAmB,CAAC,SAAS;wBAC9B,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,QAAQ,CAAC;+BACjD,UAAU,KAAK,mBAAmB,CAAC,cAAc,CAAC;wBACzD,MAAM;oBACV,KAAK,mBAAmB,CAAC,QAAQ;;wBAE7B,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,QAAQ,CAAC;+BACjD,UAAU,KAAK,mBAAmB,CAAC,SAAS,CAAC;wBACpD,MAAM;oBACV,KAAK,mBAAmB,CAAC,aAAa;wBAClC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,QAAQ,CAAC;+BAChD,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,eAAe,CAAC,CAAC;wBAC9D,MAAM;oBACV,KAAK,mBAAmB,CAAC,SAAS;wBAC9B,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,eAAe,CAAC;+BACxD,UAAU,KAAK,mBAAmB,CAAC,aAAa,CAAC;wBACxD,MAAM;oBACV,KAAK,mBAAmB,CAAC,eAAe;;wBAEpC,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,eAAe,CAAC;+BACxD,UAAU,KAAK,mBAAmB,CAAC,SAAS,CAAC;wBACpD,MAAM;oBACV,KAAK,mBAAmB,CAAC,SAAS;wBAC9B,MAAM,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,mBAAmB,CAAC,eAAe,EAAE,mBAAmB,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvI,MAAM;oBACV,KAAK,mBAAmB,CAAC,OAAO;;wBAE5B,MAAM,IAAI,CAAC,mBAAmB,CAAC,eAAe,EAAE,mBAAmB,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACxG,MAAM;oBACV,KAAK,mBAAmB,CAAC,MAAM;;wBAE3B,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;wBACvD,MAAM;oBACV;wBACI,MAAM,IAAI,KAAK,CAAC,8BAA4B,QAAQ,MAAG,CAAC,CAAC;iBAChE;aACJ;YAED,OAAO,MAAM,CAAC;SACjB;QAEL,kBAAC;IAAD,CAAC;;IC9JD,IAAM,qBAAqB,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC;IAC9D,IAAM,eAAe,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;aAOlC,eAAe,CAAI,QAAmB,EACnB,aAA+B;QAChE,OAAO,UAAC,MAAqB,IAAK,OAAA,MAAM,CAAC,IAAI,CAAC,IAAI,uBAAuB,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC,GAAA,CAAC;IACtG,CAAC;IAED;QACE,iCAAoB,QAAmB,EAAU,aAA+B;YAA5D,aAAQ,GAAR,QAAQ,CAAW;YAAU,kBAAa,GAAb,aAAa,CAAkB;YAC9E,IAAI,QAAQ,CAAC,WAAW,EAAE;gBACxB,IAAI,CAAqB,QAAS,CAAC,qBAAqB,CAAC,EAAE;oBACrC,QAAS,CAAC,qBAAqB,CAAC,GAAG,IAAIC,YAAO,EAAE,CAAC;oBACjD,QAAS,CAAC,eAAe,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC;oBAEtE,QAAQ,CAAC,WAAW,GAAG;wBAErB,IAAI,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;wBAC7C,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,EAAE,CAAC;wBACnC,IAAI,CAAC,qBAAqB,CAAC,CAAC,QAAQ,EAAE,CAAC;qBACxC,CAAC;iBACH;aACF;SACF;QAED,sCAAI,GAAJ,UAAK,UAAyB,EAAE,MAAW;YAEzC,OAAO,MAAM,CAAC,SAAS,CAAC,IAAI,yBAAyB,CAAC,UAAU,EAAqB,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;SAC1H;QACH,8BAAC;IAAD,CAAC,IAAA;IAED;QAA2C,6CAAa;QACtD,mCAAY,WAA0B,EAClB,SAA4B,EAC5B,aAA+B;YAFnD,YAGE,kBAAM,WAAW,CAAC,SAWnB;YAbmB,eAAS,GAAT,SAAS,CAAmB;YAC5B,mBAAa,GAAb,aAAa,CAAkB;YAGjD,IAAM,OAAO,GAAG,aAAa;kBACzBC,UAAK,CAAC,aAAa,EAAE,SAAS,CAAC,qBAAqB,CAAC,CAAC;kBACtD,SAAS,CAAC,qBAAqB,CAAC,CAAC,YAAY,EAAE,CAAC;YAEpD,KAAI,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CACxB;gBACE,WAAW,CAAC,WAAW,EAAE,CAAC;aAC3B,CACF,CAAC,CAAC;;SACJ;QACH,gCAAC;IAAD,CAhBA,CAA2CC,eAAU;;aCpCrC,GAAG,CAAI,MAAM;QAC3B,OAAO,UAAC,MAAqB,IAAK,OAAA,MAAM,CAAC,IAAI,CAAC,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC,GAAA,CAAC;IACzE,CAAC;IAED;QACE,qBAAoB,IAAY;YAAZ,SAAI,GAAJ,IAAI,CAAQ;SAC/B;QAED,0BAAI,GAAJ,UAAK,UAAyB,EAAE,MAAW;YACzC,OAAO,MAAM,CAAC,SAAS,CAAC,IAAI,aAAa,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACnE;QACH,kBAAC;IAAD,CAAC,IAAA;IAED;QAA+B,iCAAa;QAG1C,uBAAY,WAA0B,EAClB,IAAY;YADhC,YAEE,kBAAM,WAAW,CAAC,SAGnB;YAJmB,UAAI,GAAJ,IAAI,CAAQ;YAHxB,kBAAY,GAAG,KAAK,CAAC;YAM3B,yBAAyB,CAAC,QAAQ,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;;SAC/C;QAGS,8BAAM,GAAhB,UAAiB,GAAQ;YACvB,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBAEnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,yBAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAC/C;YACD,iBAAM,MAAM,YAAC,GAAG,CAAC,CAAC;SACnB;QAES,iCAAS,GAAnB;YACE,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,yBAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAC/C;YACD,iBAAM,SAAS,WAAE,CAAC;SACnB;QAED,mCAAW,GAAX;YACE,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,yBAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAC/C;YAED,iBAAM,WAAW,WAAE,CAAC;SACrB;QACH,oBAAC;IAAD,CApCA,CAA+BA,eAAU;;QCH5B,sBAAsB,GAAG,IAAIJ,mBAAc,CAAS,qBAAqB,EAAE;;QAWpF,0BAAgE,kBAA4C;YAA5C,uBAAkB,GAAlB,kBAAkB,CAA0B;YAPpG,kBAAa,GAAiB,EAAE,CAAC;YACjC,0BAAqB,GAAG,IAAIE,YAAO,EAAmB,CAAC;YACvD,uBAAkB,GAAW,IAAI,CAAC;YACnC,0BAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE,CAAC;YACjE,oBAAe,GAAG,IAAI,cAAc,EAAE,CAAC;SAK9C;QAEM,+CAAoB,GAA3B,UAA4B,UAAmB;YAC3C,IAAI,UAAU,KAAK,IAAI,IAAI,UAAU,GAAG,CAAC,EAAE;gBACvC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,kCAAgC,UAAY,CAAC,CAAC;gBAChE,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC;aACxC;iBAAM;gBACH,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,8BAA8B,CAAC,CAAC;gBAClD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;aAClC;SACJ;;QAGO,+BAAI,GAAZ,UAAa,KAAoD,EAAE,OAAe,EAAE,MAAe;YAC/F,IAAM,cAAc,GAAG,MAAM,GAAG,WAAS,MAAM,MAAG,GAAG,EAAE,CAAC;YACxD,IAAM,MAAM,GAAG,gBAAgB,CAAC;YAChC,IAAM,gBAAgB,GAAG,WAAS,KAAK,WAAM,MAAM,UAAK,cAAc,UAAK,OAAS,CAAC;YACrF,QAAQ,KAAK;gBACT,KAAK,OAAO,CAAC;gBACb,KAAK,OAAO,CAAC;gBACb,KAAK,MAAM;oBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAC9B,MAAM;gBACV,KAAK,MAAM;oBACP,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;oBAC/B,MAAM;gBACV,KAAK,OAAO;oBACR,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;oBAChC,MAAM;aACb;SACJ;QAEM,0CAAe,GAAtB;YAAA,iBAGC;YADG,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,GAAA,CAAC,CAAC;SAC7F;QAEM,yCAAc,GAArB,UAAsB,MAAc;YAEhC,IAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAChD,OAAO,YAAY,GAAE,YAAY,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC;SACrD;QAEM,kCAAO,GAAd,UAAe,IAAoB;YACzB,IAAA,qCAAmC,EAAlC,iBAAkC,CAAC;YAC1C,OAAO,SAAS,CAAC;SACpB;QAEM,mCAAQ,GAAf,UAAgB,KAAuB;YAAvC,iBAqBC;YAnBG,IAAM,MAAM,GAA2C,EAAE,CAAC;YAE1D,KAAK,CAAC,OAAO,CAAC,UAAC,QAAQ;gBAEnB,IAAM,WAAW,GAAG,KAAI,CAAC,eAAe,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAEzF,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,mBAAiB,QAAQ,CAAC,WAAW,EAAE,mCAAgC,EAAC,WAAW,CAAC,CAAC;gBACvG,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;gBAE/C,MAAM,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;aAClD,CAAC,CAAC;YAEH,IAAI,MAAM,CAAC,MAAM,EACjB;gBACI,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;YAGD,OAAO,MAAM,CAAC;SACjB;QAEM,gDAAqB,GAA5B,UAA6B,EAAU,EAAE,MAAc;YACnD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,4CAA0C,MAAM,MAAG,EAAC,EAAE,CAAC,CAAC;YAE1E,IAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAE3C,IAAI,WAAW,EAAE;gBACb;oBACI,IAAI,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,CAAC,EAAE;wBAC5D,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;wBAE/B,IAAI,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,OAAO,CAAC,EAAE;4BAC5D,IAAI,CAAC,kBAAkB,CAAC,WAAW,EACjC;gCACE,MAAM,EAAE,mBAAmB,CAAC,OAAO;gCACnC,aAAa,EAAE,MAAM,IAAI,eAAe;gCACxC,WAAW,EAAE,cAAc;6BAC5B,CACF,CAAC;yBACH;qBACF;iBACJ;aACJ;iBACD;gBACI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC,4DAA4D,EAAC,EAAE,CAAC,CAAC;aACrF;SACJ;QAGM,uCAAY,GAAnB,UAAoB,EAAU;YAC5B,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SAC1B;QAEM,wCAAa,GAApB,UAAqB,KAAe;YAApC,iBAuBC;YAtBG,IAAI,eAAe,GAAG,KAAK,CAAC;YAE5B,KAAK,CAAC,OAAO,CAAC,UAAA,EAAE;gBACZ,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,qBAAqB,EAAE,EAAE,CAAC,CAAC;gBAC7C,IAAM,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;gBAE3C,IAAI,WAAW,EAAE;oBACb,IAAI,WAAW,CAAC,WAAW,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAE;wBACvD,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE;4BACjC,MAAM,EAAE,mBAAmB,CAAC,aAAa;yBAC5C,CAAC,CAAC;qBACN;yBAAM;wBACH,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE;4BACjC,MAAM,EAAE,mBAAmB,CAAC,cAAc;yBAC7C,CAAC,CAAC;qBACN;iBACJ;qBAAM;oBACH,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,4DAA4D,EAAE,EAAE,CAAC,CAAC;iBACvF;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3B;QAEM,uCAAY,GAAnB,UAAoB,EAAU,EAAE,KAAoB;YAApB,sBAAA,EAAA,YAAoB;YAChD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,qBAAqB,EAAE,EAAE,CAAC,CAAC;YAE7C,IAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAE3C,IAAI,WAAW,EAAE;gBACb,IAAI,WAAW,CAAC,MAAM,KAAK,mBAAmB,CAAC,SAAS;uBACjD,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,CAAC,EACjE;oBACI,IAAI,WAAW,CAAC,kBAAkB,EAAE;wBAChC,WAAW,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;wBAC7C,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC;qBACzC;oBAED,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;wBACI,MAAM,EAAE,mBAAmB,CAAC,SAAS;qBACxC,CAAC,CAAC;oBAEP,IAAI,KAAK,EAAE;wBACP,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;qBACxB;oBAED,IAAI,CAAC,gBAAgB,EAAE,CAAC;iBAC3B;aACJ;iBACD;gBACI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,4DAA4D,EAAE,EAAE,CAAC,CAAC;aACvF;SACJ;QAEM,sCAAW,GAAlB,UAAmB,EAAU;YAEzB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,wBAAwB,EAAE,EAAE,CAAC,CAAC;YAEhD,IAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAE3C,IAAI,WAAW,EACf;gBACI,IAAI,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,MAAM,CAAC,EAAE;oBAEzD,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oBAE7B,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,EAAC,MAAM,EAAE,mBAAmB,CAAC,MAAM,EAAC,CAAC,CAAC;oBAE3E,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;iBACxC;aACJ;iBACD;gBACI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,2DAA2D,EAAE,EAAE,CAAC,CAAC;aACtF;SACJ;QAEO,6CAAkB,GAA1B,UAA2B,WAAwB;YAC/C,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,gCAAgC,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;;YAGpE,IAAI,WAAW,CAAC,kBAAkB,EAAE;gBAChC,WAAW,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;gBAC7C,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC;aACzC;YAED,OAAO,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;SAC7C;QAEO,2CAAgB,GAAxB;YAAA,iBAcC;YAbG,IAAI,IAAI,CAAC,wBAAwB,EAAE;gBAC/B,YAAY,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;gBAC5C,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;aACxC;;;YAID,IAAI,CAAC,wBAAwB,GAAG,UAAU,CAAC;gBACvC,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,sBAAsB,CAAC,CAAC;gBAC1C,KAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;gBACrC,KAAI,CAAC,oBAAoB,EAAE,CAAC;gBAC5B,KAAI,CAAC,mBAAmB,EAAE,CAAC;aAC9B,EAAE,GAAG,CAAC,CAAC;SACX;QAEO,+CAAoB,GAA5B;YAAA,iBAkEC;YAjEG,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAA,CAAC,CAAC,MAAM,CAAC,UAAA,WAAW;gBACtG,OAAO,WAAW,CAAC,MAAM,KAAK,mBAAmB,CAAC,cAAc;uBACzD,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;aACrE,CAAC,CAAC;YAEH,IAAI,KAAK,CAAC,MAAM,EAChB;gBACI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC,cAAY,KAAK,CAAC,MAAM,mCAAgC,CAAC,CAAC;gBAE3E,IAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,UAAC,GAAgE,EAAE,IAAkB;oBACnH,IAAM,aAAa,GAAG,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;oBAEhE,IAAM,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,KAAK,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,KAAK,IAAI,GAAA,CAAC,CAAC;oBAEpI,IAAI,WAAW,EAAE;wBACb,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAChC;yBAAM;wBACH,GAAG,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,EAAC,CAAC,CAAC;qBACrD;oBAED,OAAO,GAAG,CAAC;iBACd,EAAE,EAAE,CAAC,CAAC;gBAEP,YAAY,CAAC,OAAO,CAAC,UAAA,IAAI;oBACrB,IAAI,IAAI,CAAC,OAAO,EAAE;wBACd,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,iCAA+B,IAAI,CAAC,KAAK,CAAC,MAAM,6BAAwB,IAAI,CAAC,OAAO,CAAC,KAAK,MAAG,CAAC,CAAC;wBAElH,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;4BAEnB,KAAI,CAAC,kBAAkB,CAAC,IAAI,EAAC,EAAE,MAAM,EAAG,mBAAmB,CAAC,SAAS,EAAC,CAAC,CAAC;yBAC3E,CAAC,CAAC;wBAEH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;6BAC3B,IAAI,CAAC,eAAe,CAAC,KAAI,CAAC,CAAC;6BAC3B,SAAS,CACN,UAAA,aAAa;4BACT,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,2CAAyC,IAAI,CAAC,KAAK,CAAC,MAAM,6BAAwB,IAAI,CAAC,OAAO,CAAC,KAAK,OAAI,CAAC,CAAC;4BAC7H,KAAI,CAAC,6BAA6B,CAAC,aAAa,CAAC,CAAC;4BAElD,KAAI,CAAC,gBAAgB,EAAE,CAAC;yBAC3B,EACD,UAAA,MAAM;4BAEF,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,wCAAsC,IAAI,CAAC,KAAK,CAAC,MAAM,6BAAwB,IAAI,CAAC,OAAO,CAAC,KAAK,kBAAa,MAAM,CAAC,OAAS,CAAC,CAAC;4BAEnJ,KAAI,CAAC,6BAA6B,CAC9B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI,IAAG,QAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,MAAM,EAAC,KAAK,EAAC,IAAC,CAAC,CACxD,CAAC;4BAEF,KAAI,CAAC,gBAAgB,EAAE,CAAC;yBAC3B,CAAC,CAAC;qBAEd;yBACI;wBACD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;4BACnB,KAAI,CAAC,kBAAkB,CAAC,IAAI,EACxB;gCACI,MAAM,EAAE,mBAAmB,CAAC,OAAO;gCACnC,aAAa,EAAE,qCAAqC;gCACpD,WAAW,EAAE,qBAAqB;6BACrC,CAAC,CAAA;yBACT,CAAC,CAAA;qBACL;iBACJ,CAAC,CAAC;aACN;SACJ;QAEO,wDAA6B,GAArC,UAAsC,aAA+C;YAArF,iBA+BC;YA9BG,aAAa,CAAC,OAAO,CACjB,UAAA,YAAY;gBACR,IAAM,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBAExD,IAAI,CAAC,WAAW,EAAE;oBACd,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,8CAA4C,YAAY,CAAC,EAAE,uHAAoH,CAAC,CAAC;iBACtM;qBACI,IAAI,WAAW,CAAC,MAAM,KAAK,mBAAmB,CAAC,SAAS,EAAE;oBAC3D,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,mHAAmH,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;iBAC1J;qBAAM,IAAI,YAAY,CAAC,MAAM,EAAE;oBAC5B,IAAM,uBAAuB,GAAG,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/D;wBACI,MAAM,EAAE,mBAAmB,CAAC,QAAQ;qBACvC,CAAC,CAAC;oBAEP,IAAI,uBAAuB,EAAE;wBACzB,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;4BACI,MAAM,EAAE,mBAAmB,CAAC,aAAa;yBAC5C,CAAC,CAAC;qBACV;iBACJ;qBAAM;oBACH,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;wBACI,MAAM,EAAE,mBAAmB,CAAC,OAAO;wBACnC,aAAa,EAAE,0BAA0B;wBACzC,WAAW,EAAE,oBAAoB;qBACpC,CAAC,CAAC;iBACV;aACJ,CAAC,CAAC;SACV;QAEO,8CAAmB,GAA3B;YAAA,iBAyCC;YAxCG,IAAM,sBAAsB,GAAG,EAAE,CAAC;YAClC,IAAM,iBAAiB,GAAG,EAAE,CAAC;YAE7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAA,MAAM;gBAE1C,IAAM,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAE/C,IAAI,WAAW,CAAC,MAAM,KAAK,mBAAmB,CAAC,SAAS,EACxD;oBACI,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBACvC;qBAAK,IAAI,WAAW,CAAC,MAAM,KAAK,mBAAmB,CAAC,aAAa;uBAC3D,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,CAAC,EACjE;oBACI,sBAAsB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC5C;aACJ,CAAC,CAAC;YAEH,IAAM,kBAAkB,GAAG,iBAAiB,CAAC,MAAM,CAAC;YACpD,IAAM,iBAAiB,GAAG,sBAAsB,CAAC,MAAM,CAAC;YAExD,IAAI,iBAAiB,GAAG,CAAC,EAAE;gBACvB,IAAI,eAAe,GAAkB,EAAE,CAAC;gBAExC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,qBAAmB,kBAAkB,0BAAqB,iBAAmB,CAAC,CAAC;gBAElG,IAAM,oBAAoB,GAAG,CAAC,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,kBAAkB,GAAG,CAAC,IAAI,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,GAAG,iBAAiB,CAAC;gBAEzJ,IAAI,oBAAoB,GAAG,CAAC,EAAE;oBAC1B,eAAe,GAAG,SACX,sBAAsB,CAAC,IAAI,CAAC,UAAA,WAAW,IAAI,OAAA,WAAW,CAAC,WAAW,IAAI,IAAI,GAAA,CAAC,EAChF,KAAK,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;iBACpC;gBAED,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,uCAAqC,oBAAsB,CAAC,CAAC;gBAGhF,eAAe,CAAC,OAAO,CAAC,UAAA,WAAW;oBAC/B,KAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;iBACrC,CAAC,CAAC;aACN;SACJ;QAEO,6CAAkB,GAA1B,UAA2B,EAAU,EAAE,QAAwB;YAC3D,IAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,IAAI,WAAW,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;YAE9E,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,CAAC;YAEzD,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAClC,EAAC,MAAM,EAAE,mBAAmB,CAAC,cAAc,EAAC,CAC/C,CAAC;SACL;QAEO,6CAAkB,GAA1B,UAA2B,WAAwB,EAAE,OAA2B;YAE5E,IAAI,MAAM,GAAG,IAAI,CAAC;YAElB,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,WAAW,CAAC,MAAM,EAAE;gBAGzD,IAAI,WAAW,CAAC,eAAe,CAAC,OAAO,CAAC,MAAM,CAAC,EAC/C;oBACI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,sCAAoC,WAAW,CAAC,MAAM,cAAS,OAAO,CAAC,MAAM,MAAG,EAAC,WAAW,CAAC,EAAE,CAAC,CAAC;oBACnH,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;iBAC/B;qBACD;oBACI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,mCAAiC,WAAW,CAAC,MAAM,cAAS,OAAO,CAAC,MAAM,wEAAqE,EAAC,WAAW,CAAC,EAAE,CAAC,CAAC;oBAEnL,WAAW,CAAC,MAAM,CAAC;wBACf,MAAM,EAAE,mBAAmB,CAAC,OAAO;wBACnC,aAAa,EAAE,sBAAsB;wBACrC,WAAW,EAAE,oBAAoB;qBACpC,CAAC,CAAC;oBAEH,MAAM,GAAG,KAAK,CAAC;iBAClB;aACJ;iBACD;;gBAEI,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;aAC9B;YAED,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,CAAC;YAEtD,OAAO,MAAM,CAAC;SACjB;QAEM,6CAAkB,GAAzB,UAA0B,cAA8B;YACpD,IAAM,aAAa,GAA2B,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YACrF,OAAO,aAAa,GAAG,aAAa,CAAC,kBAAkB,EAAE,GAAG,KAAK,CAAC;SACrE;QAEO,0CAAe,GAAvB,UAAwB,WAAwB;YAAhD,iBA2FC;YAzFU,IAAA,uBAAI,EAAE,mBAAE,CAAgB;YAC/B,IAAM,aAAa,GAA2B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE3E,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,mCAAiC,EAAE,MAAG,CAAC,CAAC;YAE1D,IAAI,CAAC,aAAa,EAAE;gBAChB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,4EAA4E,CAAC,CAAC;gBAChG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;oBACI,MAAM,EAAE,mBAAmB,CAAC,OAAO;oBACnC,aAAa,EAAE,qCAAqC;oBACpD,WAAW,EAAE,qBAAqB;iBACrC,CAAC,CAAC;gBAEP,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAE3B;iBAAM,IAAI,WAAW,CAAC,eAAe,CAAC,mBAAmB,CAAC,SAAS,CAAC,EAAE;gBACnE,IAAI,WAAW,CAAC,kBAAkB,EAAE;oBAChC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,+GAA+G,CAAC,CAAC;oBACnI,WAAW,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;oBAC7C,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC;iBACzC;gBAED,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE;oBACjC,MAAM,EAAE,mBAAmB,CAAC,SAAS;oBACrC,QAAQ,EAAE,CAAC;oBACX,aAAa,EAAE,IAAI,IAAI,EAAE;iBAC5B,CAAC,CAAC;gBAEH,IAAM,mBAAiB,GAAG,UAAC,EAAU,EAAE,iBAAyB;oBAE5D,IAAI,MAAM,GAAG,KAAK,CAAC;oBACnB,IAAM,sBAAsB,GAAG,CAAC,CAAC,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;oBAExD,IAAI,CAAC,sBAAsB,EAAE;wBACzB,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,+BAA6B,iBAAiB,4EAAyE,EAAE,EAAE,CAAC,CAAC;qBAClJ;yBAAM,IAAI,WAAW,CAAC,MAAM,KAAK,mBAAmB,CAAC,SAAS,EAAE;wBAC7D,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,+BAA6B,iBAAiB,0EAAuE,EAAE,EAAE,CAAC,CAAC;qBAChJ;yBAAK;wBACF,MAAM,GAAG,IAAI,CAAC;qBACjB;oBAED,OAAO,MAAM,CAAC;iBACjB,CAAC;gBAEF,WAAW,CAAC,kBAAkB,GAAG,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC;qBAC1D,SAAS,CACN,UAAC,aAAa;oBACV,IAAI,mBAAiB,CAAC,EAAE,EAAE,UAAU,CAAC,EACrC;wBACI,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;4BACI,QAAQ,EAAE,aAAa,CAAC,QAAQ;yBACnC,CAAC,CAAC;qBACV;iBACJ,EACD,UAAC,KAAK;oBACF,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC;oBAEtC,IAAI,mBAAiB,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE;wBAClC,IAAM,aAAa,GAAG,KAAK,IAAI,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;wBAElE,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;4BACI,MAAM,EAAE,mBAAmB,CAAC,OAAO;4BACnC,aAAa,eAAA;4BACb,WAAW,EAAE,eAAe;yBAC/B,CAAC,CAAC;qBACV;oBAED,KAAI,CAAC,gBAAgB,EAAE,CAAC;iBAC3B,EACD;oBACI,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC;oBAEtC,IAAI,mBAAiB,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE;wBACrC,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAC/B;4BACI,MAAM,EAAE,mBAAmB,CAAC,eAAe;4BAC3C,QAAQ,EAAE,CAAC;4BACX,gBAAgB,EAAE,IAAI,IAAI,EAAE;yBAC/B,CAAC,CAAC;wBAEP,KAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;wBACrC,KAAI,CAAC,gBAAgB,EAAE,CAAC;qBAC3B;iBACJ,CACJ,CAAC;aACT;SACJ;QAEO,4CAAiB,GAAzB,UAA0B,QAAwB;YAE9C,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACzB,OAAO,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAA,iBAAiB;oBACjD,OAAO,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;iBAChD,CAAC,CAAC;aACN;iBAAM;gBACH,OAAO,IAAI,CAAC;aACf;SACJ;QAED,sCAAW,GAAX;YAAA,iBAKC;YAJG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAA,EAAE;gBAEtC,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;aACxB,CAAC,CAAC;SACN;;gDAjgBYG,WAAM,SAAC,sBAAsB,cAAGP,aAAQ;;QAR5C,gBAAgB;YAD5BF,eAAU,EAAE;YASI,WAAAS,WAAM,CAAC,sBAAsB,CAAC,CAAA,EAAE,WAAAP,aAAQ,EAAE,CAAA;;WAR9C,gBAAgB,CA0gB5B;QAAD,uBAAC;KA1gBD;;;QCFA;SAEC;QAFY,sBAAsB;YAXlCC,aAAQ,CAAC;gBACN,OAAO,EAAE,EACR;gBACD,YAAY,EAAE,EACb;gBACD,OAAO,EAAE,EACR;gBACD,SAAS,EAAE;oBACP,gBAAgB;iBACnB;aACJ,CAAC;WACW,sBAAsB,CAElC;QAAD,6BAAC;KAFD;;;QCVA;SAMC;QAAD,wBAAC;IAAD,CAAC;;ICVD;QACa,QAAQ,GAAG,UAAU,IAAI,EAAE,WAAW,EAAE,WAAW;QAC/D,IAAI,IAAI,GAAG,MAAM;QAChB,WAAW,GAAG,0BAA0B;QACxC,QAAQ,GAAG,WAAW,IAAI,WAAW,EACrC,OAAO,GAAG,IAAI,EACd,GAAG,GAAG,CAAC,WAAW,IAAI,CAAC,WAAW,IAAI,OAAO,EAC7C,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,EACpC,QAAQ,GAAG,UAAS,CAAC,IAAE,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC,EAAC,EACzC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,QAAQ,CAAC,EAC5E,QAAQ,GAAG,WAAW,IAAI,UAAU,EACpC,IAAI,EACJ,MAAM,CAAC;QACR,MAAM,GAAE,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAE;QAEhD,IAAG,MAAM,CAAC,IAAI,CAAC,KAAG,MAAM,EAAC;YACxB,OAAO,GAAC,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC5B,QAAQ,GAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACpB,OAAO,GAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACnB;;QAGD,IAAG,+BAA+B,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC;YAEhD,IAAG,OAAO,CAAC,MAAM,IAAI,IAAI,GAAC,IAAI,GAAC,KAAK,CAAC,IAAI,MAAM,KAAK,QAAQ,EAAE;gBAC7D,OAAO,GAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC/B,QAAQ,GAAC,OAAO,CAAC,IAAI,IAAI,WAAW,CAAC;aACrC;iBAAI;gBACJ,OAAO,SAAS,CAAC,UAAU;oBAC1B,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC;oBACtD,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAE;aACxB;SAED;QAED,IAAI,GAAG,OAAO,YAAY,MAAM;YAC/B,OAAO;YACP,IAAI,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAE;QAG1C,SAAS,aAAa,CAAC,MAAM;YAC5B,IAAI,KAAK,GAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAC/B,IAAI,GAAE,KAAK,CAAC,CAAC,CAAC,EACd,OAAO,GAAE,KAAK,CAAC,CAAC,CAAC,IAAI,QAAQ,GAAG,IAAI,GAAG,kBAAkB,EACzD,OAAO,GAAE,OAAO,CAAE,KAAK,CAAC,GAAG,EAAE,CAAE,EAC/B,EAAE,GAAE,OAAO,CAAC,MAAM,EAClB,CAAC,GAAE,CAAC,EACJ,KAAK,GAAE,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC;YAE3B,KAAI,CAAC,EAAC,CAAC,GAAC,EAAE,EAAC,EAAE,CAAC;gBAAE,KAAK,CAAC,CAAC,CAAC,GAAE,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAEhD,OAAO,IAAI,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;SACzC;QAED,SAAS,KAAK,CAAC,GAAG,EAAE,OAAO;YAE1B,IAAI,UAAU,IAAI,MAAM,EAAE;gBACzB,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;gBAClB,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;gBAC1C,MAAM,CAAC,SAAS,GAAG,kBAAkB,CAAC;gBACtC,MAAM,CAAC,SAAS,GAAG,gBAAgB,CAAC;gBACpC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;gBAC9B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBAClC,UAAU,CAAC;oBACV,MAAM,CAAC,KAAK,EAAE,CAAC;oBACf,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;oBAClC,IAAG,OAAO,KAAG,IAAI,EAAC;wBAAC,UAAU,CAAC,cAAY,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAC,EAAE,GAAG,CAAE,CAAC;qBAAC;iBAC1F,EAAE,EAAE,CAAC,CAAC;gBACP,OAAO,IAAI,CAAC;aACZ;;YAGD,IAAG,+CAA+C,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;gBAC7E,GAAG,GAAC,GAAG,CAAC,OAAO,CAAC,qBAAqB,EAAE,WAAW,CAAC,CAAC;gBACpD,IAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC;oBACpB,IAAG,OAAO,CAAC,gGAAgG,CAAC,EAAC;wBAAE,QAAQ,CAAC,IAAI,GAAC,GAAG,CAAC;qBAAE;iBACnI;gBACD,OAAO,IAAI,CAAC;aACZ;;YAGD,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACzC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAE7B,IAAG,CAAC,OAAO,EAAC;gBACX,GAAG,GAAC,OAAO,GAAC,GAAG,CAAC,OAAO,CAAC,qBAAqB,EAAE,WAAW,CAAC,CAAC;aAC5D;YACD,CAAC,CAAC,GAAG,GAAC,GAAG,CAAC;YACV,UAAU,CAAC,cAAY,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;SAE7D;QAKD,IAAI,SAAS,CAAC,UAAU,EAAE;YACzB,OAAO,SAAS,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;SAC5C;QAED,IAAG,IAAI,CAAC,GAAG,EAAC;YACX,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;SAC5C;aAAI;;YAEJ,IAAG,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,WAAW,KAAG,QAAQ,EAAE;gBAC3D,IAAG;oBACF,OAAO,KAAK,CAAE,OAAO,GAAI,QAAQ,GAAK,UAAU,GAAK,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAG,CAAC;iBAC/E;gBAAA,OAAM,CAAC,EAAC;oBACR,OAAO,KAAK,CAAE,OAAO,GAAI,QAAQ,GAAK,GAAG,GAAG,kBAAkB,CAAC,IAAI,CAAC,EAAE,KAAK,CAAG,CAAC;iBAC/E;aACD;;YAGD,MAAM,GAAC,IAAI,UAAU,EAAE,CAAC;YACxB,MAAM,CAAC,MAAM,GAAC,UAAS,CAAC;gBACvB,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;aAC1B,CAAC;YACF,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SAC3B;QACD,OAAO,IAAI,CAAC;IACb;;ICrHA,IAAM,WAAW,GAAG;QAChB,GAAG,EAAE,MAAM;QACX,GAAG,EAAE,MAAM;QACX,GAAG,EAAE,OAAO;KACf,CAAC;;QAEF;SAiIC;QA/HU,sBAAS,GAAhB,UAAiB,KAAU;YACvB,IAAI,WAAW,GAAG,KAAK,CAAC;YACxB,QAAO,OAAO,KAAK;gBAEf,KAAK,QAAQ,CAAC;gBACd,KAAK,QAAQ,CAAC;gBACd,KAAK,SAAS;oBACV,WAAW,GAAG,KAAK,CAAC;oBACpB,MAAM;gBACV;oBACA,WAAW,GAAG,KAAK,IAAI,EAAE,CAAC;oBACtB,MAAM;aACb;YAED,OAAO,MAAM,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAA,IAAI,IAAI,OAAA,WAAW,CAAC,IAAI,CAAC,GAAA,CAAC,CAAC;SAC3E;QAEG,8BAAiB,GAAxB,UAAyB,KAAY;YAE9B,IAAI,KAAK,EAAE;gBACP,IAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;gBAC3C,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACrB,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACvB,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACvB,OAAO,QAAQ,CAAC;aACnB;iBAAI;gBACD,OAAO,IAAI,CAAC;aACf;SACJ;QAEM,4BAAe,GAAtB,UAAuB,KAAY;YAE/B,IAAI,KAAK,EAAE;gBACP,IAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;gBAC3C,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;gBACtB,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACxB,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACxB,OAAO,QAAQ,CAAC;aACnB;iBAAI;gBACD,OAAO,IAAI,CAAC;aACf;SACJ;QAAO,kCAAqB,GAA5B,UAA6B,KAAU;YAE1C,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,UAAS,GAAG;gBACtC,IAAI,KAAK,CAAC,GAAG,CAAC,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE;oBACjD,YAAY,CAAC,qBAAqB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;iBAC/C;qBACI,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE;oBAC7B,OAAO,KAAK,CAAC,GAAG,CAAC,CAAA;iBACjB;aACD,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACb;QAES,wBAAW,GAAlB,UAAsB,IAAS,EAAE,aAAmB;YAChD,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,aAAa,IAAI,aAAa,CAAC,MAAM,EAAE;gBAC9D,IAAM,aAAa,GAAG,aAAa,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,QAAC,EAAE,YAAY,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAC,CAAC;qBAC/F,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,GAAA,CAAC;qBACjC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,GAAA,CAAC,CAAC;gBACvC,IAAI,aAAa,CAAC,MAAM,EAAE;oBACtB,IAAM,kBAAkB,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;oBAClD,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,kBAAkB,GAAG,CAAC,CAAC,CAAC;oBACtD,aAAa,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;wBAC1B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;qBAClC,CAAC,CAAC;oBAEH,IAAI,CAAC,MAAM,OAAX,IAAI,YAAQ,SAAS,EAAE,CAAC,GAAK,aAAa,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,YAAY,GAAA,CAAC,GAAE;oBAE3E,OAAO,IAAI,CAAC;iBACf;aACJ;YAED,OAAO,KAAK,CAAC;SAChB;QAEM,0BAAa,GAApB,UAAwB,IAAS,EAAE,aAAmB;YAClD,IAAI,aAAa,IAAI,aAAa,CAAC,MAAM,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;gBAC9D,IAAM,aAAa,GAAG,aAAa,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,QAAC,EAAE,YAAY,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAC,CAAC;qBAC/F,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,GAAA,CAAC;qBACjC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,GAAA,CAAC,CAAC;gBACvC,IAAI,aAAa,CAAC,MAAM,EAAE;oBACtB,IAAM,kBAAkB,GAAG,aAAa,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC;oBACzE,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,kBAAkB,GAAG,CAAC,CAAC,CAAC;oBACpE,aAAa,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC;wBAC1B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;qBAClC,CAAC,CAAC;oBACH,IAAM,cAAc,GAAG,SAAS,GAAG,aAAa,CAAC,MAAM,CAAC;oBAExD,IAAI,CAAC,MAAM,OAAX,IAAI,YAAQ,cAAc,GAAG,CAAC,EAAE,CAAC,GAAK,aAAa,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,YAAY,GAAA,CAAC,GAAE;oBAEpF,OAAO,IAAI,CAAC;iBACf;aACJ;YAED,OAAO,KAAK,CAAC;SAChB;QAEM,uBAAU,GAAjB,UAAkB,KAAa,EAAE,YAA6B;YAA7B,6BAAA,EAAA,oBAA6B;YAE1D,IAAI,KAAK,GAAW,IAAI,CAAC,KAAK,CAAE,IAAI,CAAC,KAAK,CAAE,KAAK,CAAE,GAAG,IAAI,CAAE,GAAG,EAAE,CAAC;YAClE,IAAI,OAAO,GAAW,IAAI,CAAC,KAAK,CAAE,CAAE,IAAI,CAAC,KAAK,CAAE,KAAK,CAAE,GAAG,EAAE,IAAK,EAAE,CAAE,CAAC;YACtE,IAAI,OAAO,GAAW,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;YAE7C,IAAI,QAAQ,GAAW,KAAK,KAAK,CAAC,GAAG,EAAE,GAAG,YAAY,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAG,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;YAC1G,IAAI,UAAU,GAAW,OAAO,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,GAAG,IAAI,GAAG,OAAO,GAAG,EAAE,GAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;YAC7H,IAAI,UAAU,GAAW,OAAO,GAAG,EAAE,GAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;YACvF,IAAI,YAAY,EAAC;gBACb,UAAU,GAAG,UAAU,GAAG,GAAG,CAAC;gBAC9B,UAAU,GAAG,UAAU,GAAG,GAAG,CAAC;aACjC;YACD,OAAO,QAAQ,GAAG,UAAU,GAAG,GAAG,GAAG,UAAU,CAAC;SACnD;QAEM,2BAAc,GAArB,UAAsB,KAAc;YAEhC,QAAQ,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,IAAI,EAAE;SAClD;QAEM,yBAAY,GAAnB,UAAoB,KAAY;YAE5B,OAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;SAC5D;QAEM,qBAAQ,GAAf,UAAgB,IAAS,EAAE,WAAmB,EAAE,WAAmB;YAE/D,OAAO,QAAQ,CAAC,IAAI,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;SACnD;QACL,mBAAC;IAAD,CAAC;;ICzID;;;;;;;;;;;;;;;IAgBA;;;;QAIa,SAAS,IAAI;QAEtB,IAAI,OAAO,GAAG;YACV,UAAU,EAAE,IAAI;YAChB,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,SAAS,EAAE,IAAI;YACf,KAAK,EAAE,IAAI;YACX,YAAY,EAAE,KAAK;YACnB,OAAO,EAAE,OAAO;YAChB,QAAQ,EAAE,QAAQ;YAClB,OAAO,EAAE,OAAO;YAChB,QAAQ,EAAE,QAAQ;YAClB,aAAa,EAAE,IAAI;YACnB,eAAe,EAAE,IAAI;YACrB,eAAe,EAAE,IAAI;YACrB,eAAe,EAAE,IAAI;SACxB,CAAC;QAEF,IAAI,WAAW,GAAG,IAAI,MAAM,CAAC,eAAe,CAAC,CAAC;QAC9C,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC,CAAC;QAEzC,IAAI,QAAQ,GAAG,UAAU,MAAM;YAC3B,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBACtB,OAAO,IAAI,CAAC;aACf;YACD,IAAI,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBAClC,OAAO,MAAM,CAAC,WAAW,EAAE,KAAK,MAAM,CAAC;aAC1C;YACD,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE;gBAClB,OAAO,UAAU,CAAC,MAAM,CAAC,CAAC;aAC7B;YACD,OAAO,MAAM,CAAC;SACjB,CAAC;QAEF,IAAI,WAAW,GAAG,UAAU,SAAkB,EAAE,GAAS;YACrD,OAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;SACrD,CAAA;QAED,IAAI,QAAQ,GAAG,UAAU,UAAU,EAAE,GAAI;;YAGrC,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;gBACjB,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;aAC3B;YAED,IAAI,OAAO,GAAG,EAAE,EAAE,OAAO,GAAG,CAAC,EAAE,aAAa,GAAG,EAAE,CAAC;;YAGlD,IAAI,OAAO,CAAC,KAAK,IAAI,UAAU,CAAC,YAAY,EAAE;gBAC1C,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,YAAY,CAAC;aAC3D;;;YAID,IAAI,UAAU,CAAC,UAAU,IAAI,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3D,IAAI,QAAQ,GAAG,EAAE,CAAC;gBAElB,KAAK,OAAO,EAAE,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,EAAE;oBAC7D,IAAI,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAClD,QAAQ,GAAG,EAAE,CAAC;oBACd,IAAI,UAAU,GAAG,EAAE,CAAC;oBAEpB,IAAI,OAAO,CAAC,eAAe,EAAE;wBACzB,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;qBAEtD;yBAAM;wBACH,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC;qBAC7B;oBAED,IAAI,OAAO,CAAC,QAAQ,EAAE;wBAClB,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;qBAC/E;yBAAM;wBACH,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;qBACrE;oBAED,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,YAAY,EAAE;wBACvC,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;qBACzD;oBAED,IAAI,OAAO,CAAC,aAAa,EAAE;wBACvB,QAAQ,CAAC,UAAU,CAAC,GAAG,QAAQ,CAAC;qBACnC;yBAAM;wBACH,OAAO,CAAC,OAAO,CAAC,OAAO,GAAG,UAAU,CAAC,GAAG,QAAQ,CAAC;qBACpD;iBACJ;gBAED,IAAI,OAAO,CAAC,aAAa,EAAE;oBACvB,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,QAAQ,CAAC;iBACvC;qBAAM,GAAE;aACZ;;YAGD,IAAI,UAAU,CAAC,aAAa,EAAE,EAAE;gBAC5B,KAAK,IAAI,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;oBACvF,KAAK,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAE1C,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,EAAE;wBACtB,IAAI,OAAO,CAAC,UAAU,EAAE;4BACpB,aAAa,IAAI,KAAK,CAAC,SAAS,CAAC;yBACpC;6BAAM;4BACH,IAAI,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;gCAC1C,IAAI,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,WAAW,KAAK,KAAK,EAAE;oCACjD,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;iCAC3D;gCACD,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;6BAEnD;iCAAM;gCACH,IAAI,OAAO,CAAC,eAAe,EAAE;oCACzB,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;oCAC/B,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;iCACnD;qCAAM;oCACH,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC;iCAC/C;6BACJ;yBACJ;qBACJ;yBACI,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,EAAE;wBAC3B,aAAa,IAAI,KAAK,CAAC,SAAS,CAAC;qBACpC;yBACI,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,EAAE;wBAE3B,IAAI,OAAO,KAAK,CAAC,EAAE;4BACf,OAAO,GAAG,EAAE,CAAC;yBAChB;;wBAGD,IAAI,OAAO,CAAC,eAAe,EAAE;4BACzB,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;yBACnD;6BAAM;4BACH,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC;yBAC1B;wBAED,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;wBAE3B,IAAI,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;4BAC/B,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,WAAW,KAAK,KAAK,EAAE;gCACtC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;6BACrC;4BACD,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;yBAEjC;6BAAM;4BACH,IAAI,OAAO,CAAC,eAAe,EAAE;gCACzB,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gCACpB,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;6BACjC;iCAAM;gCACH,OAAO,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC;6BAC7B;4BACD,OAAO,EAAE,CAAC;yBACb;qBACJ;iBACJ;aACJ;iBAAM,IAAI,CAAC,aAAa,EAAC;gBACtB,IAAI,OAAO,CAAC,eAAe,EAAE;oBACzB,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;oBAC9B,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACvC;qBAAM;oBACH,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;iBACnC;aACJ;YAED,IAAI,aAAa,EAAE;gBACf,IAAI,OAAO,CAAC,QAAQ,EAAE;oBAClB,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;oBAC3D,IAAI,KAAK,EAAE;wBACP,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;qBACpC;iBACJ;qBAAM,IAAI,OAAO,CAAC,SAAS,EAAE;oBAC1B,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBACxF;qBAAM;oBACH,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;iBACnE;aACJ;YAED,OAAO,OAAO,CAAC;SAClB,CAAA;;;QAKD,IAAI,WAAW,GAAG,UAAU,MAAM;YAC9B,IAAI;gBACA,IAAI,SAAS,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,CAAC,IAAI,aAAa,EAAE,EAAE,iBAAiB,CAAC,MAAM,CAAC,CAAC;gBAC1F,OAAO,SAAS,CAAC;aACpB;YAAC,OAAO,GAAG,EAAE;gBACV,OAAO,IAAI,CAAC;aACf;SACJ,CAAA;;;QAID,IAAI,WAAW,GAAG,UAAU,SAAS;YACjC,IAAI;gBACA,IAAI,MAAM,GAAG,IAAI,CAAC;gBAElB,IAAI,OAAO,SAAS,KAAK,UAAU,EAAE;oBAEjC,IAAI,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;oBAC7B,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;oBAEvD,OAAO,MAAM,CAAC;iBACjB;qBAAM;oBACH,OAAO,IAAI,CAAC;;;;;;;iBAOf;aACJ;YAAC,OAAO,CAAC,EAAE;gBACR,OAAO,IAAI,CAAC;aACf;SACJ,CAAA;;QAGD,OAAO;YACH,QAAQ,EAAE,QAAQ;YAClB,WAAW,EAAE,WAAW;YACxB,WAAW,EAAE,WAAW;YACxB,WAAW,EAAE,WAAW;SAC3B,CAAC;IAEN,CAAC,EAAE;;IC9OH,SAAS,iBAAiB,CAAC,UAAkB;QAC3C,IAAI,gBAAgB,GAAG,EAAE,CAAC;QAC1B,IAAI,UAAU,EAAE;YACd,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAA,aAAa;gBAC3C,IAAM,KAAK,GAAG,YAAY,CAAC,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;gBAChE,gBAAgB,IAAI,MAAI,aAAa,WAAK,KAAK,OAAG,CAAC;aACpD,CAAC,CAAC;SACJ;QAED,OAAO,gBAAgB,CAAC;IAC1B,CAAC;IAED,SAAS,kBAAkB,CAAC,MAAc,EAAE,YAAoB,EAAE,aAAkB;QAChF,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,IAAM,oBAAoB,GAAG,CAAC,YAAY,IAAI,EAAE,EAAE,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;QAC9E,IAAI,oBAAoB,EAAE;YACxB,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;YACrD,MAAM,GAAG,EAAE,CAAC;SACb;QAED,IAAI,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;YAC9B,aAAa,CAAC,OAAO,CAAC,UAAA,SAAS;gBAE3B,MAAM,IAAI,kBAAkB,CAAC,MAAM,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;aACjE,CAAC,CAAC;SACN;aAAM,IAAI,aAAa,IAAI,OAAO,aAAa,KAAK,QAAQ,EAAE;YAE3D,IAAM,gBAAgB,GAAG,iBAAiB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;YAClE,IAAI,aAAW,GAAQ,EAAE,CAAC;YAE1B,IAAI,aAAa,CAAC,MAAM,CAAC,EAAE;gBACvB,aAAW,GAAG,YAAY,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;aAC/D;iBAAM;gBACH,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAA,aAAa;oBAC5C,IAAI,aAAa,KAAK,MAAM,EAAE;wBAC1B,aAAW,IAAI,kBAAkB,CAAC,MAAM,EAAE,aAAa,EAAE,aAAa,CAAC,aAAa,CAAC,CAAC,CAAC;qBAC1F;iBACJ,CAAC,CAAC;aACN;YAED,MAAM,IAAI,MAAI,MAAM,GAAG,YAAc,CAAC;YAEtC,IAAI,gBAAgB,EAAE;gBAClB,MAAM,IAAO,gBAAgB,MAAG,CAAC;aACpC;iBAAM;gBACH,MAAM,IAAI,GAAG,CAAC;aACjB;YAED,MAAM,IAAO,aAAW,UAAK,MAAM,GAAG,YAAY,MAAG,CAAC;SACzD;QAGD,OAAO,MAAM,CAAC;IAClB,CAAC;;QAED;SAoFC;QAlFU,gBAAM,GAAb,UAAc,GAAY;YAEtB,OAAO,SAAS,CAAC,WAAW,CAAC,GAAG,EAC5B;gBACI,OAAO,EAAE,MAAM;gBACf,QAAQ,EAAE,OAAO;gBACjB,OAAO,EAAE,MAAM;gBACf,QAAQ,EAAE,OAAO;gBACjB,eAAe,EAAE,KAAK;gBACzB,QAAQ,EAAE,KAAK;gBACf,QAAQ,EAAE,KAAK;gBACd,SAAS,EAAE,KAAK;aACjB,CAAC,CAAC;SACV;QAEM,eAAK,GAAZ,UAAa,IAAY,EAAE,IAAY,EAAE,MAAmB;YAAnB,uBAAA,EAAA,WAAmB;YACxD,IAAM,YAAY,GAAG,MAAM,GAAM,MAAM,MAAG,GAAG,EAAE,CAAC;YAChD,IAAI,YAAY,GAAG,EAAE,CAAC;YACtB,IAAI,gBAAgB,GAAG,EAAE,CAAC;YAE1B,IAAI,IAAI,EAAE;gBACN,gBAAgB,GAAG,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAEnD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAA,QAAQ;oBAC9B,IAAI,QAAQ,KAAK,MAAM,EAAE;wBACtB,YAAY,IAAI,kBAAkB,CAAC,YAAY,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAA;qBAC5E;iBACJ,CAAC,CAAC;aACN;YAED,OAAO,MAAI,YAAY,GAAG,IAAI,GAAG,gBAAgB,SAAI,YAAY,UAAK,YAAY,GAAG,IAAI,MAAG,CAAC;SAChG;QAEM,qBAAW,GAAlB,UAAmB,IAAS,EAAE,MAAsC;YAAtC,uBAAA,EAAA,WAAsC;YAChE,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,IAAM,gBAAgB,GAAG,UAAC,KAAW;gBAEjC,IAAI,MAAe,CAAC;gBAEpB,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;oBAC3B,MAAM,GAAG,SAAS,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;iBACjD;qBACI;oBACD,MAAM,GAAG,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;iBAC1C;gBAED,OAAO,MAAM,CAAC;aACjB,CAAC;YAEF,IAAI,IAAI,EAAE;gBACN,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG;oBACnC,IAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBAChC,IAAM,YAAY,IAAI,aAAa,KAAK,IAAI,IAAI,OAAO,aAAa,KAAK,WAAW,IAAI,aAAa,KAAK,EAAE,CAAC,CAAC;oBAE9G,IAAI,CAAC,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC,WAAW,IAAI,CAAC,YAAY,CAAC,EAAE;wBAC9D,IAAI,aAAa,YAAY,KAAK,EAAE;4BAChC,aAAa,CAAC,GAAG,CAAC,UAAA,SAAS;gCACvB,IAAM,UAAU,GAAG,gBAAgB,CAAC,SAAS,CAAC,CAAC;gCAC/C,IAAM,YAAY,IAAI,UAAU,KAAK,IAAI,IAAI,OAAO,UAAU,KAAK,WAAW,IAAI,UAAU,KAAK,EAAE,CAAC,CAAC;gCAErG,IAAI,CAAC,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC,WAAW,IAAI,CAAC,YAAY,CAAC,EAAE;oCAC9D,MAAM,IAAI,MAAI,GAAG,SAAI,UAAU,UAAK,GAAG,MAAG,CAAC;iCAC9C;6BACJ,CAAC,CAAA;yBACL;6BAAM,IAAI,OAAO,aAAa,KAAK,QAAQ,EAAE;4BAC1C,IAAM,UAAU,GAAG,gBAAgB,CAAC,aAAa,CAAC,CAAC;4BACnD,IAAM,cAAY,IAAI,UAAU,KAAK,IAAI,IAAI,OAAO,UAAU,KAAK,WAAW,IAAI,UAAU,KAAK,EAAE,CAAC,CAAC;4BAErG,IAAI,CAAC,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC,WAAW,IAAI,CAAC,cAAY,CAAC,EAAE;gCAC9D,MAAM,IAAI,MAAI,GAAG,SAAI,UAAU,UAAK,GAAG,MAAG,CAAC;6BAC9C;yBACJ;6BACI;4BACD,IAAM,KAAK,GAAG,YAAY,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;4BACpD,MAAM,IAAI,MAAI,GAAG,SAAI,KAAK,UAAK,GAAG,MAAG,CAAC;yBACzC;qBACJ;iBACJ,CAAC,CAAC;aACN;YAED,OAAO,MAAM,CAAC;SACjB;QACL,gBAAC;IAAD,CAAC;;QCrIY,iBAAiB,GAAgC,IAAIC,mBAAc,CAAc,mBAAmB,EAAE;;QAEnH;YACY,YAAO,GAAS,EAAE,CAAC;SA0B9B;QAxBG,sCAAiB,GAAjB,UAAkB,GAAU,EAAE,KAAS;YACnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;SAC7B;QAED,wCAAmB,GAAnB,UAAoB,GAAU;YAC1B,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SAC5B;QAED,2CAAsB,GAAtB,UAAuB,GAAU;YAC9B,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SAC3B;QAED,wCAAmB,GAAnB,UAAoB,GAAU,EAAE,KAAS;YACrC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;SAC7B;QAED,0CAAqB,GAArB,UAAsB,GAAU;YAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SAC5B;QAED,6CAAwB,GAAxB,UAAyB,GAAU;YAC/B,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SAC5B;QAEL,iBAAC;IAAD,CAAC;;;QCvBD;SAkBC;gCAlBY,mBAAmB;;;;;;;QAQrB,2BAAO,GAAd;YACI,OAAO;gBACH,QAAQ,EAAE,qBAAmB;gBAC7B,SAAS,EAAE;oBACP,EAAE,OAAO,EAAE,iBAAiB,EAAE,QAAQ,EAAE,UAAU,EAAE;oBACvD,YAAY;oBACT,EAAE,OAAO,EAAE,2BAA2B,EAAE,QAAQ,EAAE,WAAW,EAAC;iBACjE;aACJ,CAAC;SACL;;QAjBQ,mBAAmB;YAX/BD,aAAQ,CAAC;gBACN,OAAO,EAAE;oBACLO,mBAAY;iBACf;gBACD,YAAY,EAAE,EACb;gBACD,OAAO,EAAE,EACR;gBACD,SAAS,EAAE,EACN;aACR,CAAC;WACW,mBAAmB,CAkB/B;QAAD,0BAAC;KAlBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}