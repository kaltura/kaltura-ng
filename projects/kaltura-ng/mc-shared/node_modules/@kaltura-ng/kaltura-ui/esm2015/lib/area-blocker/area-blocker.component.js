import { __decorate, __metadata } from "tslib";
import { Component, Input, OnInit, ViewEncapsulation, ViewChild, ElementRef, Renderer2 } from '@angular/core';
import { AreaBlockerMessage } from './area-blocker-message';
let AreaBlockerComponent = class AreaBlockerComponent {
    constructor(_renderer) {
        this._renderer = _renderer;
        this.bodyScroll = false;
        this.spinnerMarginTop = 0;
    }
    set showLoader(value) {
        // once showLoader is set to true, use a timeout so *ngIf will cause the HTML to render and then calculate area blocker width
        if (value) {
            this._showLoaderHandler = setTimeout(() => {
                this._showLoaderHandler = null;
                if (this.bodyScroll && !!this.areaBlockerContainer) {
                    const rect = this.areaBlockerContainer.nativeElement.getBoundingClientRect();
                    if (rect.width < document.body.clientWidth && this.spinnerContainer) {
                        this._renderer.setStyle(this.spinnerContainer.nativeElement, 'left', `${rect.left + rect.width / 2}px`);
                    }
                }
                this._renderer.setStyle(this.spinnerContainer.nativeElement, 'opacity', '1'); // show the spinner only after its position is calculated to prevent seeing it jumps...
            }, 0);
        }
        else {
            if (this._showLoaderHandler) {
                clearTimeout(this._showLoaderHandler);
                this._showLoaderHandler = null;
            }
            if (this.bodyScroll && this.spinnerContainer) {
                this._renderer.setStyle(this.spinnerContainer.nativeElement, 'opacity', '0'); // hide the spinner so we won't see it jump next time its position is recalculated
            }
        }
        this._showLoader = value;
    }
    get showLoader() {
        return this._showLoader;
    }
    set message(value) {
        if (typeof value === 'string') {
            this._message = { title: 'Error', message: value, buttons: [{ label: 'Dismiss', action: () => { this._message = null; } }] };
        }
        else if (value instanceof AreaBlockerMessage) {
            this._message = value;
        }
        else {
            this._message = null;
        }
    }
    handleAction(button) {
        if (button) {
            button.action();
        }
    }
    ngOnInit() {
    }
};
AreaBlockerComponent.ctorParameters = () => [
    { type: Renderer2 }
];
__decorate([
    ViewChild('areaBlockerContainer', { static: false }),
    __metadata("design:type", ElementRef)
], AreaBlockerComponent.prototype, "areaBlockerContainer", void 0);
__decorate([
    ViewChild('spinnerContainer', { static: false }),
    __metadata("design:type", ElementRef)
], AreaBlockerComponent.prototype, "spinnerContainer", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], AreaBlockerComponent.prototype, "bodyScroll", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], AreaBlockerComponent.prototype, "spinnerMarginTop", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], AreaBlockerComponent.prototype, "classes", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], AreaBlockerComponent.prototype, "showLoader", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], AreaBlockerComponent.prototype, "message", null);
AreaBlockerComponent = __decorate([
    Component({
        selector: 'k-area-blocker',
        template: "<ng-content></ng-content>\n<div #areaBlockerContainer *ngIf=\"showLoader || _message\" class=\"kAreaBlockerContainer\" [class.kAreaBlockerContainerError]=\"_message\" [ngClass]=\"classes\">\n  <div *ngIf=\"showLoader && !_message\" class=\"loading-backdrop show\">\n    <div #spinnerContainer class='spinner-container' [class.bodyScroll]=\"bodyScroll\" [style.marginTop]=\"spinnerMarginTop+'px'\">\n      <div class='spinner'><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>\n    </div>\n  </div>\n  <div  class=\"kErrorMessageContainer\" *ngIf=\"_message\" [class.bodyScroll]=\"bodyScroll\">\n    <div class=\"kErrorMessage\">\n      <div class=\"kErrorMessageTitle\">{{ _message.title }}</div>\n      <div class=\"kErrorMessageText\">{{ _message.message }}</div>\n      <div class=\"kErrorButtons\">\n        <button *ngFor=\"let button of _message.buttons\" (click)=\"handleAction(button)\" [ngClass]=\"button.classes\">{{button.label}}</button>\n      </div>\n    </div>\n  </div>\n</div>\n",
        encapsulation: ViewEncapsulation.None,
        styles: ["k-area-blocker{position:relative;width:100%;height:100%;display:flex;flex:1 1 auto}k-area-blocker>.kAreaBlockerContainer{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(255,255,255,.7);position:absolute;top:0;left:0;z-index:510}@-webkit-keyframes kaltura-spinner{0%{transform:rotate(0) scale(.7);opacity:1}100%,70%{transform:rotate(360deg) scale(.7);opacity:1}82%{transform:rotate(360deg) scale(0);opacity:0}87%{transform:rotate(360deg) scale(.9);opacity:1}}@keyframes kaltura-spinner{0%{transform:rotate(0) scale(.7);opacity:1}100%,70%{transform:rotate(360deg) scale(.7);opacity:1}82%{transform:rotate(360deg) scale(0);opacity:0}87%{transform:rotate(360deg) scale(.9);opacity:1}}k-area-blocker>.kAreaBlockerContainer .loading-backdrop{position:absolute;top:0;left:0;width:100%;height:100%}k-area-blocker>.kAreaBlockerContainer .loading-backdrop .spinner-container{display:block;opacity:0;transform:translate3d(-50px,-50px,0)}k-area-blocker>.kAreaBlockerContainer .loading-backdrop .spinner-container.bodyScroll{position:fixed}k-area-blocker>.kAreaBlockerContainer .spinner{width:100px;height:100px;position:relative;-webkit-animation:2.5s infinite kaltura-spinner;animation:2.5s infinite kaltura-spinner}k-area-blocker>.kAreaBlockerContainer .spinner span{width:8px;height:8px;background-color:#fff;display:block;border-radius:8px;position:absolute;top:50%;left:50%;margin-top:-4px;margin-left:-4px}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(1){transform:rotate(45deg) translateX(-25px) translateY(-25px);background-color:#da1f26}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(2){transform:rotate(90deg) translateX(-25px) translateY(-25px);background-color:#06a885}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(3){transform:rotate(135deg) translateX(-25px) translateY(-25px);background-color:#009344}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(4){transform:rotate(180deg) translateX(-25px) translateY(-25px);background-color:#f8a61a}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(5){transform:rotate(225deg) translateX(-25px) translateY(-25px);background-color:#1b4a97}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(6){transform:rotate(270deg) translateX(-25px) translateY(-25px);background-color:#00abcc}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(7){transform:rotate(315deg) translateX(-25px) translateY(-25px);background-color:#b1d238}k-area-blocker>.kAreaBlockerContainer .spinner span:nth-child(8){transform:rotate(360deg) translateX(-25px) translateY(-25px);background-color:#fcd203}k-area-blocker>.kAreaBlockerContainer .kErrorMessageContainer{display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:1001}k-area-blocker>.kAreaBlockerContainer .kErrorMessageContainer.bodyScroll{margin-top:0;position:fixed;top:calc(50vh - 90px);left:calc(50vw - 293px)}k-area-blocker>.kAreaBlockerContainer .kErrorMessage{width:586px;background-color:#fff;border-radius:4px;box-shadow:0 16px 20px 0 rgba(0,0,0,.3);padding:60px 32px 32px;box-sizing:border-box;text-align:center}k-area-blocker>.kAreaBlockerContainer .kErrorMessageTitle{color:#333;font-size:20px;font-weight:700;line-height:24px}k-area-blocker>.kAreaBlockerContainer .kErrorMessageText{max-height:250px;min-height:30px;padding:4px;overflow-y:auto;color:#999;font-size:15px;font-weight:700;line-height:18px;margin-top:26px;white-space:pre-wrap}k-area-blocker>.kAreaBlockerContainer .kErrorButtons{margin-top:44px}k-area-blocker>.kAreaBlockerContainer .kErrorButtons button{cursor:pointer;min-width:100px;outline:0;color:#333;font-size:14px;font-weight:700;line-height:17px;text-align:center;height:34px;border:1px solid #ccc;border-radius:3px;background-color:#fff;box-sizing:border-box;padding:0 12px;margin:0 8px}"]
    }),
    __metadata("design:paramtypes", [Renderer2])
], AreaBlockerComponent);
export { AreaBlockerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJlYS1ibG9ja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BrYWx0dXJhLW5nL2thbHR1cmEtdWkvIiwic291cmNlcyI6WyJsaWIvYXJlYS1ibG9ja2VyL2FyZWEtYmxvY2tlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM5RyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQVE1RCxJQUFhLG9CQUFvQixHQUFqQyxNQUFhLG9CQUFvQjtJQXlEL0IsWUFBb0IsU0FBb0I7UUFBcEIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQWhEL0IsZUFBVSxHQUFhLEtBQUssQ0FBQztRQUM3QixxQkFBZ0IsR0FBWSxDQUFDLENBQUM7SUErQ0csQ0FBQztJQTVDbEMsSUFBSSxVQUFVLENBQUMsS0FBZTtRQUNuQyw2SEFBNkg7UUFDN0gsSUFBSSxLQUFLLEVBQUU7WUFDUCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDdEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztnQkFDL0IsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7b0JBQ2hELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUUsQ0FBQztvQkFDN0UsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTt3QkFDakUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDM0c7aUJBQ0o7Z0JBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyx1RkFBdUY7WUFDekssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ1Q7YUFBTTtZQUNILElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO2dCQUN6QixZQUFZLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7Z0JBQ3RDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7YUFDbEM7WUFDRCxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO2dCQUMxQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxFQUFFLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLGtGQUFrRjthQUNuSztTQUNKO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksVUFBVTtRQUNaLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUMxQixDQUFDO0lBR0QsSUFBSSxPQUFPLENBQUMsS0FBbUM7UUFFN0MsSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQzdCO1lBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLEtBQUssRUFBRyxPQUFPLEVBQUUsT0FBTyxFQUFHLEtBQUssRUFBRSxPQUFPLEVBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFHLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLENBQUEsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1NBQy9IO2FBQUssSUFBSSxLQUFLLFlBQVksa0JBQWtCLEVBQzdDO1lBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7U0FDdkI7YUFDRDtZQUNFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUlNLFlBQVksQ0FBQyxNQUErQjtRQUNqRCxJQUFJLE1BQU0sRUFBRTtZQUNWLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNqQjtJQUNILENBQUM7SUFFRCxRQUFRO0lBR1IsQ0FBQztDQUVGLENBQUE7O1lBYmdDLFNBQVM7O0FBbkRjO0lBQXJELFNBQVMsQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQzs4QkFBdUIsVUFBVTtrRUFBQztBQUNyQztJQUFqRCxTQUFTLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7OEJBQW1CLFVBQVU7OERBQUM7QUFFdEU7SUFBUixLQUFLLEVBQUU7O3dEQUE4QjtBQUM3QjtJQUFSLEtBQUssRUFBRTs7OERBQStCO0FBQzlCO0lBQVIsS0FBSyxFQUFFOztxREFBa0I7QUFFakI7SUFBUixLQUFLLEVBQUU7OztzREF1QlA7QUFPRDtJQURDLEtBQUssRUFBRTs7O21EQWFQO0FBdkRVLG9CQUFvQjtJQU5oQyxTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsZ0JBQWdCO1FBQzFCLDRpQ0FBNEM7UUFFNUMsYUFBYSxFQUFHLGlCQUFpQixDQUFDLElBQUk7O0tBQ3ZDLENBQUM7cUNBMEQrQixTQUFTO0dBekQ3QixvQkFBb0IsQ0FzRWhDO1NBdEVZLG9CQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgVmlld0VuY2Fwc3VsYXRpb24sIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBcmVhQmxvY2tlck1lc3NhZ2UgfSBmcm9tICcuL2FyZWEtYmxvY2tlci1tZXNzYWdlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnay1hcmVhLWJsb2NrZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vYXJlYS1ibG9ja2VyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vYXJlYS1ibG9ja2VyLmNvbXBvbmVudC5zY3NzJ10sXG4gIGVuY2Fwc3VsYXRpb24gOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIEFyZWFCbG9ja2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0ICB7XG5cbiAgcHJpdmF0ZSBfc2hvd0xvYWRlcjogYm9vbGVhbjtcbiAgcHVibGljIF9tZXNzYWdlIDogQXJlYUJsb2NrZXJNZXNzYWdlO1xuICBwcml2YXRlIF9zaG93TG9hZGVySGFuZGxlcjogbnVtYmVyO1xuXG4gIEBWaWV3Q2hpbGQoJ2FyZWFCbG9ja2VyQ29udGFpbmVyJywgeyBzdGF0aWM6IGZhbHNlIH0pIGFyZWFCbG9ja2VyQ29udGFpbmVyOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdzcGlubmVyQ29udGFpbmVyJywgeyBzdGF0aWM6IGZhbHNlIH0pIHNwaW5uZXJDb250YWluZXI6IEVsZW1lbnRSZWY7XG5cbiAgQElucHV0KCkgYm9keVNjcm9sbCA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgc3Bpbm5lck1hcmdpblRvcCA6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgpIGNsYXNzZXMgOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgc2V0IHNob3dMb2FkZXIodmFsdWUgOiBib29sZWFuKSB7XG4gICAgICAvLyBvbmNlIHNob3dMb2FkZXIgaXMgc2V0IHRvIHRydWUsIHVzZSBhIHRpbWVvdXQgc28gKm5nSWYgd2lsbCBjYXVzZSB0aGUgSFRNTCB0byByZW5kZXIgYW5kIHRoZW4gY2FsY3VsYXRlIGFyZWEgYmxvY2tlciB3aWR0aFxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5fc2hvd0xvYWRlckhhbmRsZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5fc2hvd0xvYWRlckhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgICAgICBpZiAodGhpcy5ib2R5U2Nyb2xsICYmICEhdGhpcy5hcmVhQmxvY2tlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuYXJlYUJsb2NrZXJDb250YWluZXIubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgIGlmIChyZWN0LndpZHRoIDwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAmJiB0aGlzLnNwaW5uZXJDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnNwaW5uZXJDb250YWluZXIubmF0aXZlRWxlbWVudCwgJ2xlZnQnLCBgJHtyZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMn1weGApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuc3Bpbm5lckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LCAnb3BhY2l0eScsICcxJyk7IC8vIHNob3cgdGhlIHNwaW5uZXIgb25seSBhZnRlciBpdHMgcG9zaXRpb24gaXMgY2FsY3VsYXRlZCB0byBwcmV2ZW50IHNlZWluZyBpdCBqdW1wcy4uLlxuICAgICAgICAgIH0sIDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5fc2hvd0xvYWRlckhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Nob3dMb2FkZXJIYW5kbGVyKTtcbiAgICAgICAgICAgICAgdGhpcy5fc2hvd0xvYWRlckhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5ib2R5U2Nyb2xsICYmIHRoaXMuc3Bpbm5lckNvbnRhaW5lcikge1xuICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnNwaW5uZXJDb250YWluZXIubmF0aXZlRWxlbWVudCwgJ29wYWNpdHknLCAnMCcpOyAvLyBoaWRlIHRoZSBzcGlubmVyIHNvIHdlIHdvbid0IHNlZSBpdCBqdW1wIG5leHQgdGltZSBpdHMgcG9zaXRpb24gaXMgcmVjYWxjdWxhdGVkXG4gICAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fc2hvd0xvYWRlciA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHNob3dMb2FkZXIoKTogYm9vbGVhbntcbiAgICByZXR1cm4gdGhpcy5fc2hvd0xvYWRlcjtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBtZXNzYWdlKHZhbHVlIDogQXJlYUJsb2NrZXJNZXNzYWdlIHwgc3RyaW5nKVxuICB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpXG4gICAge1xuICAgICAgdGhpcy5fbWVzc2FnZSA9IHsgdGl0bGUgOiAnRXJyb3InLCBtZXNzYWdlIDogdmFsdWUsIGJ1dHRvbnMgOiBbeyBsYWJlbCA6J0Rpc21pc3MnLCBhY3Rpb24gOiAoKSA9PiB7IHRoaXMuX21lc3NhZ2UgPSBudWxsO319XX07XG4gICAgfWVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJlYUJsb2NrZXJNZXNzYWdlKVxuICAgIHtcbiAgICAgIHRoaXMuX21lc3NhZ2UgPSB2YWx1ZTtcbiAgICB9ZWxzZVxuICAgIHtcbiAgICAgIHRoaXMuX21lc3NhZ2UgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3JlbmRlcmVyOiBSZW5kZXJlcjIpe31cblxuICBwdWJsaWMgaGFuZGxlQWN0aW9uKGJ1dHRvbiA6IHsgYWN0aW9uIDogKCkgPT4gdm9pZH0pIHtcbiAgICBpZiAoYnV0dG9uKSB7XG4gICAgICBidXR0b24uYWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKVxuICB7XG5cbiAgfVxuXG59XG5cbiJdfQ==